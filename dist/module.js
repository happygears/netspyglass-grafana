/* [create-plugin] version: 5.19.0 */
define(["react-redux","rxjs","module","@grafana/ui","lodash","react","@emotion/css","redux","@grafana/data","react-dom","@grafana/runtime"],((e,t,r,n,o,a,i,l,s,c,u)=>(()=>{var d={41:e=>{e.exports=function(e){return function(t){return e(t)}}},149:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},157:(e,t,r)=>{var n=r(9138)(r(1433),"Set");e.exports=n},200:t=>{"use strict";t.exports=e},369:(e,t,r)=>{var n=r(2092),o=r(9626),a=r(9925),i=r(6809),l=r(4385);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=l,e.exports=s},422:(e,t,r)=>{var n=r(4800),o=r(41),a=r(3685),i=a&&a.isMap,l=i?o(i):n;e.exports=l},492:(e,t,r)=>{e=r.nmd(e);var n=r(1433),o=r(659),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,l=i&&i.exports===a?n.Buffer:void 0,s=(l?l.isBuffer:void 0)||o;e.exports=s},654:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},659:e=>{e.exports=function(){return!1}},859:(e,t,r)=>{var n=r(2083),o=r(8876);e.exports=function(e,t){return n(e,o(e),t)}},966:(e,t,r)=>{var n=r(4403),o=r(8876),a=r(1178);e.exports=function(e){return n(e,a,o)}},1019:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},1145:(e,t,r)=>{var n=r(2083),o=r(1178);e.exports=function(e,t){return e&&n(t,o(t),e)}},1163:(e,t,r)=>{var n=r(6204),o=r(1256),a=r(6397),i=r(492),l=r(2845),s=r(7995),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),u=!r&&o(e),d=!r&&!u&&i(e),p=!r&&!u&&!d&&s(e),g=r||u||d||p,f=g?n(e.length,String):[],m=f.length;for(var b in e)!t&&!c.call(e,b)||g&&("length"==b||d&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||l(b,m))||f.push(b);return f}},1178:(e,t,r)=>{var n=r(1163),o=r(1452),a=r(8330);e.exports=function(e){return a(e)?n(e):o(e)}},1201:(e,t,r)=>{var n=r(1416),o=r(1955),a=r(2616),i=r(157),l=r(8499),s=r(7148),c=r(1485),u="[object Map]",d="[object Promise]",p="[object Set]",g="[object WeakMap]",f="[object DataView]",m=c(n),b=c(o),v=c(a),h=c(i),y=c(l),x=s;(n&&x(new n(new ArrayBuffer(1)))!=f||o&&x(new o)!=u||a&&x(a.resolve())!=d||i&&x(new i)!=p||l&&x(new l)!=g)&&(x=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case m:return f;case b:return u;case v:return d;case h:return p;case y:return g}return t}),e.exports=x},1256:(e,t,r)=>{var n=r(9250),o=r(2934),a=Object.prototype,i=a.hasOwnProperty,l=a.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!l.call(e,"callee")};e.exports=s},1269:e=>{"use strict";e.exports=t},1308:e=>{"use strict";e.exports=r},1414:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}},1416:(e,t,r)=>{var n=r(9138)(r(1433),"DataView");e.exports=n},1419:(e,t,r)=>{var n=r(2931);e.exports=function(e){return n(e,5)}},1433:(e,t,r)=>{var n=r(5380),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},1452:(e,t,r)=>{var n=r(7499),o=r(9566),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},1485:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},1491:(e,t,r)=>{var n=r(8953),o=r(7499),a=r(8201),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=o(e),r=[];for(var l in e)("constructor"!=l||!t&&i.call(e,l))&&r.push(l);return r}},1548:(e,t,r)=>{var n=r(2781),o=n?n.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},1738:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},1848:(e,t,r)=>{var n=r(2707);e.exports=function(){this.__data__=new n,this.size=0}},1955:(e,t,r)=>{var n=r(9138)(r(1433),"Map");e.exports=n},2007:e=>{"use strict";e.exports=n},2083:(e,t,r)=>{var n=r(2863),o=r(4772);e.exports=function(e,t,r,a){var i=!r;r||(r={});for(var l=-1,s=t.length;++l<s;){var c=t[l],u=a?a(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),i?o(r,c,u):n(r,c,u)}return r}},2092:(e,t,r)=>{var n=r(9073),o=r(2707),a=r(1955);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||o),string:new n}}},2140:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},2149:(e,t,r)=>{var n=r(4558),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},2316:(e,t,r)=>{var n=r(4558);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},2616:(e,t,r)=>{var n=r(9138)(r(1433),"Promise");e.exports=n},2707:(e,t,r)=>{var n=r(9714),o=r(3812),a=r(4727),i=r(8379),l=r(8291);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=l,e.exports=s},2781:(e,t,r)=>{var n=r(1433).Symbol;e.exports=n},2827:e=>{e.exports=function(e){return e!=e}},2845:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},2863:(e,t,r)=>{var n=r(4772),o=r(9316),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var i=e[t];a.call(e,t)&&o(i,r)&&(void 0!==r||t in e)||n(e,t,r)}},2931:(e,t,r)=>{var n=r(6469),o=r(149),a=r(2863),i=r(1145),l=r(4306),s=r(7030),c=r(8835),u=r(859),d=r(6728),p=r(966),g=r(9697),f=r(1201),m=r(6785),b=r(3283),v=r(9181),h=r(6397),y=r(492),x=r(422),O=r(8953),E=r(3764),w=r(1178),I=r(5405),D="[object Arguments]",S="[object Function]",A="[object Object]",C={};C[D]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[A]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[S]=C["[object WeakMap]"]=!1,e.exports=function e(t,r,P,j,N,B){var T,R=1&r,_=2&r,L=4&r;if(P&&(T=N?P(t,j,N,B):P(t)),void 0!==T)return T;if(!O(t))return t;var F=h(t);if(F){if(T=m(t),!R)return c(t,T)}else{var k=f(t),M=k==S||"[object GeneratorFunction]"==k;if(y(t))return s(t,R);if(k==A||k==D||M&&!N){if(T=_||M?{}:v(t),!R)return _?d(t,l(T,t)):u(t,i(T,t))}else{if(!C[k])return N?t:{};T=b(t,k,R)}}B||(B=new n);var G=B.get(t);if(G)return G;B.set(t,T),E(t)?t.forEach((function(n){T.add(e(n,r,P,n,t,B))})):x(t)&&t.forEach((function(n,o){T.set(o,e(n,r,P,o,t,B))}));var $=F?void 0:(L?_?g:p:_?I:w)(t);return o($||t,(function(n,o){$&&(n=t[o=n]),a(T,o,e(n,r,P,o,t,B))})),T}},2934:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3109:e=>{e.exports=function(e){return this.__data__.has(e)}},3121:(e,t,r)=>{var n=r(4558);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},3241:e=>{"use strict";e.exports=o},3283:(e,t,r)=>{var n=r(7177),o=r(4893),a=r(4021),i=r(1548),l=r(6733);e.exports=function(e,t,r){var s=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return o(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,r);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return a(e);case"[object Symbol]":return i(e)}}},3330:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3347:(e,t,r)=>{var n=r(1019)(Object.getPrototypeOf,Object);e.exports=n},3389:(e,t,r)=>{var n=r(2707),o=r(1955),a=r(369);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var i=r.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(i)}return r.set(e,t),this.size=r.size,this}},3506:(e,t,r)=>{var n=r(6584);e.exports=function(e){return null==e?"":n(e)}},3508:(e,t,r)=>{var n=r(8953),o=Object.create,a=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=a},3629:e=>{e.exports=function(){return[]}},3685:(e,t,r)=>{e=r.nmd(e);var n=r(5380),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o&&n.process,l=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=l},3764:(e,t,r)=>{var n=r(7866),o=r(41),a=r(3685),i=a&&a.isSet,l=i?o(i):n;e.exports=l},3812:(e,t,r)=>{var n=r(8301),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},3966:(e,t,r)=>{var n=r(6584),o=r(8812),a=r(9270),i=r(4847),l=r(5936),s=r(4092),c=r(3506);e.exports=function(e,t,r){if((e=c(e))&&(r||void 0===t))return o(e);if(!e||!(t=n(t)))return e;var u=s(e),d=s(t),p=l(u,d),g=i(u,d)+1;return a(u,p,g).join("")}},4021:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},4082:e=>{var t="\\ud800-\\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+n+"|"+o+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+s+("(?:\\u200d(?:"+[a,i,l].join("|")+")"+c+s+")*"),d="(?:"+[a+n+"?",n,i,l,r].join("|")+")",p=RegExp(o+"(?="+o+")|"+d+u,"g");e.exports=function(e){return e.match(p)||[]}},4092:(e,t,r)=>{var n=r(9174),o=r(654),a=r(4082);e.exports=function(e){return o(e)?a(e):n(e)}},4272:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},4297:(e,t,r)=>{var n=r(4558),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},4306:(e,t,r)=>{var n=r(2083),o=r(5405);e.exports=function(e,t){return e&&n(t,o(t),e)}},4385:(e,t,r)=>{var n=r(5535);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},4403:(e,t,r)=>{var n=r(8740),o=r(6397);e.exports=function(e,t,r){var a=t(e);return o(e)?a:n(a,r(e))}},4558:(e,t,r)=>{var n=r(9138)(Object,"create");e.exports=n},4575:(e,t,r)=>{var n=r(5663),o=r(2827),a=r(6547);e.exports=function(e,t,r){return t==t?a(e,t,r):n(e,o,r)}},4727:(e,t,r)=>{var n=r(8301);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4772:(e,t,r)=>{var n=r(8559);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},4800:(e,t,r)=>{var n=r(1201),o=r(2934);e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},4847:(e,t,r)=>{var n=r(4575);e.exports=function(e,t){for(var r=e.length;r--&&n(t,e[r],0)>-1;);return r}},4893:(e,t,r)=>{var n=r(7177);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},5380:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},5405:(e,t,r)=>{var n=r(1163),o=r(1491),a=r(8330);e.exports=function(e){return a(e)?n(e,!0):o(e)}},5414:(e,t,r)=>{var n=r(7148),o=r(2934);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},5535:(e,t,r)=>{var n=r(5662);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},5662:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5663:e=>{e.exports=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},5936:(e,t,r)=>{var n=r(4575);e.exports=function(e,t){for(var r=-1,o=e.length;++r<o&&n(t,e[r],0)>-1;);return r}},5959:e=>{"use strict";e.exports=a},6089:e=>{"use strict";e.exports=i},6204:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},6397:e=>{var t=Array.isArray;e.exports=t},6458:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6469:(e,t,r)=>{var n=r(2707),o=r(1848),a=r(7406),i=r(8569),l=r(3109),s=r(3389);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=l,c.prototype.set=s,e.exports=c},6547:e=>{e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},6567:(e,t,r)=>{var n=r(8446),o=r(8092),a=r(8953),i=r(1485),l=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,u=s.toString,d=c.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(n(e)?p:l).test(i(e))}},6584:(e,t,r)=>{var n=r(2781),o=r(4272),a=r(6397),i=r(5414),l=n?n.prototype:void 0,s=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return o(t,e)+"";if(i(t))return s?s.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},6728:(e,t,r)=>{var n=r(2083),o=r(8355);e.exports=function(e,t){return n(e,o(e),t)}},6733:(e,t,r)=>{var n=r(7177);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},6772:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},6785:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},6809:(e,t,r)=>{var n=r(5535);e.exports=function(e){return n(this,e).has(e)}},7030:(e,t,r)=>{e=r.nmd(e);var n=r(1433),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o?n.Buffer:void 0,l=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=l?l(r):new e.constructor(r);return e.copy(n),n}},7129:(e,t,r)=>{var n=r(7148),o=r(3330),a=r(2934),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[n(e)]}},7148:(e,t,r)=>{var n=r(2781),o=r(7903),a=r(1738),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},7177:(e,t,r)=>{var n=r(8944);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},7406:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},7499:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},7571:(e,t,r)=>{var n=r(7148),o=r(6397),a=r(2934);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==n(e)}},7572:(e,t,r)=>{var n=r(3506),o=/[\\^$.*+?()[\]{}|]/g,a=RegExp(o.source);e.exports=function(e){return(e=n(e))&&a.test(e)?e.replace(o,"\\$&"):e}},7694:e=>{"use strict";e.exports=l},7781:e=>{"use strict";e.exports=s},7866:(e,t,r)=>{var n=r(1201),o=r(2934);e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},7903:(e,t,r)=>{var n=r(2781),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,l=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[l]=r:delete e[l]),o}},7995:(e,t,r)=>{var n=r(7129),o=r(41),a=r(3685),i=a&&a.isTypedArray,l=i?o(i):n;e.exports=l},8092:(e,t,r)=>{var n,o=r(8109),a=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},8109:(e,t,r)=>{var n=r(1433)["__core-js_shared__"];e.exports=n},8201:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},8291:(e,t,r)=>{var n=r(8301);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},8301:(e,t,r)=>{var n=r(9316);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},8330:(e,t,r)=>{var n=r(8446),o=r(3330);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},8355:(e,t,r)=>{var n=r(8740),o=r(3347),a=r(8876),i=r(3629),l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=o(e);return t}:i;e.exports=l},8379:(e,t,r)=>{var n=r(8301);e.exports=function(e){return n(this.__data__,e)>-1}},8398:e=>{"use strict";e.exports=c},8446:(e,t,r)=>{var n=r(7148),o=r(8953);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},8499:(e,t,r)=>{var n=r(9138)(r(1433),"WeakMap");e.exports=n},8531:e=>{"use strict";e.exports=u},8559:(e,t,r)=>{var n=r(9138),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},8569:e=>{e.exports=function(e){return this.__data__.get(e)}},8740:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},8812:(e,t,r)=>{var n=r(2140),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},8835:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},8876:(e,t,r)=>{var n=r(1414),o=r(3629),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,l=i?function(e){return null==e?[]:(e=Object(e),n(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=l},8944:(e,t,r)=>{var n=r(1433).Uint8Array;e.exports=n},8953:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9073:(e,t,r)=>{var n=r(2316),o=r(6458),a=r(2149),i=r(4297),l=r(3121);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=l,e.exports=s},9138:(e,t,r)=>{var n=r(6567),o=r(6772);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},9174:e=>{e.exports=function(e){return e.split("")}},9181:(e,t,r)=>{var n=r(3508),o=r(3347),a=r(7499);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(o(e))}},9250:(e,t,r)=>{var n=r(7148),o=r(2934);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},9270:(e,t,r)=>{var n=r(9772);e.exports=function(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:n(e,t,r)}},9316:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},9566:(e,t,r)=>{var n=r(1019)(Object.keys,Object);e.exports=n},9626:(e,t,r)=>{var n=r(5535);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},9697:(e,t,r)=>{var n=r(4403),o=r(8355),a=r(5405);e.exports=function(e){return n(e,a,o)}},9714:e=>{e.exports=function(){this.__data__=[],this.size=0}},9772:e=>{e.exports=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}},9925:(e,t,r)=>{var n=r(5535);e.exports=function(e){return n(this,e).get(e)}}},p={};function g(e){var t=p[e];if(void 0!==t)return t.exports;var r=p[e]={id:e,loaded:!1,exports:{}};return d[e](r,r.exports,g),r.loaded=!0,r.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var r in t)g.o(t,r)&&!g.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),g.p="public/plugins/happygears-netspyglass-datasource-v2/";var f={};return(()=>{"use strict";g.r(f),g.d(f,{plugin:()=>xi});var e=g(1308),t=g.n(e);g.p=t()&&t().uri?t().uri.slice(0,t().uri.lastIndexOf("/")+1):"public/plugins/happygears-netspyglass-datasource-v2/";var r=g(7781),n=g(8531),o=g(1419),a=g.n(o);var i=function(e){return e.AND="AND",e.OR="OR",e.IN="IN",e.NOT_IN="NOT IN",e.EQ="=",e.NOT_EQ="<>",e.LT="<",e.LTE="<=",e.GT=">",e.GTE=">=",e.NOT_EQ2="!=",e.REGEXP="REGEXP",e.NOT_REGEXP="NOT REGEXP",e.IS_NULL="ISNULL",e.NOT_NULL="NOTNULL",e.MATCH_IP="_ABSTRACT_OPERATOR_IP_MATCH",e.MATCH_IP_SUBNET="<<",e.BETWEEN="BETWEEN",e.LIKE="LIKE",e}({});class l{static isOperand(e){return"string"==typeof e&&e in i}static proccessMultiOperand(e,t,r,n){if(r&&e.length>t+1){return`${n} ${l.isOperand(e[t+1])?e[t+1]:"AND"}`}return`${n}`}static escape(e){return e.replace(/[^a-zA-Z0-9_]/g,"_")}setOptions(e){this.options=e}setDistinct(e){return this.options.distinct=e,this}distinct(){return this.options.distinct=!0,this}select(e,t=!1){return t?this.options.select.push(...e):this.options.select=e,this}from(e){return this.options.from=e,this}where(e){return this.options.where=e,this}orderBy(e){const t=this.options.orderBy||[];return"string"==typeof e&&t.push(e),this.options.orderBy=e,this}groupBy(e){const t=this.options.groupBy||[];return"string"==typeof e&&t.push(e),this.options.groupBy=e,this}limit(e,t=0){return 0===e||(this.options.limit=[e,t]),this}compile(){const e=[],{select:t,from:r,distinct:n=!1,groupBy:o,limit:a,orderBy:i,where:s}=this.options;if(e.push("SELECT"),n&&e.push("DISTINCT"),t&&e.push(this.options.select.join(",")),r&&e.push("FROM",this.options.from),s){const t=l.buildWhere(s);t&&e.push("WHERE",t)}return o&&o.length&&e.push(`GROUP BY ${o.join(", ")}`),i&&i.length&&e.push(`ORDER BY ${function(e){return e.map((e=>{const t=e.split(" ");if(t.length>1){const e=t[t.length-1];return`'${t.slice(0,t.length-1).join(" ")}' ${e}`}return`'${e}'`}))}(i).join(", ")}`),a&&a.length&&e.push(`LIMIT ${a.join(", ")}`),e.join(" ")}static buildWhere(e){if(null==e)return"";const t=[];let r=a()(e),n="AND",o=Array.isArray(r)&&r.reduce(((e,t)=>l.isOperand(t)?e+1:e),0)>1;const i=["IN","NOT IN"];return Array.isArray(r)&&0===r.length?"":(Array.isArray(r)||"object"!=typeof r||(r=[n,r]),r.length>=2?(n=r[0],r=r.splice(1),r.forEach(((e,n)=>{if(Array.isArray(e))t.push(`(${l.buildWhere(e)})`);else if("object"==typeof e)for(const a in e){let s="=",c=e[a];if(Array.isArray(c))if(s=c[0].toUpperCase(),c=c.slice(1),"BETWEEN"===s){const e=c.reduce(((e,t)=>(e.length&&(e+=" AND "),e+`'${t}'`)),"");c=e}else{if("_ABSTRACT_OPERATOR_IP_MATCH"===s){const e=c.reduce((function(e,t){const r=-1===t.indexOf("/")?"=":"<<";return e.length&&(e+=" OR "),e+`${a} ${r} '${t}'`}),"");return void t.push(e)}if("NOTNULL"===s)return void t.push(l.proccessMultiOperand(r,n,o,`${a} ${s}`));if("ISNULL"===s)return void t.push(l.proccessMultiOperand(r,n,o,`${a} ${s}`));-1!==i.indexOf(s)?(Array.isArray(c)&&Array.isArray(c[0])&&(c=c[0]),c="number"==typeof c[0]?`(${c.join(", ")})`:`('${c.join("', '")}')`):c=`'${c}'`}else c=isNaN(c)?`'${c}'`:`${c}`;t.push(l.proccessMultiOperand(r,n,o,`${a} ${s} ${c}`))}else"string"==typeof e&&(o&&l.isOperand(e)||t.push(e))})),o?t.join(" "):t.join(` ${n} `)):(1===r.length&&(r=[]),r.join(` ${n} `)))}constructor(e){var t,r,n;n=void 0,(r="options")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.options=e||{select:[],from:""}}}g(7572),g(3966);function s(e){return e.replace(/'/g,"\\'")}var c=g(1269);function u(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,l,"next",e)}function l(e){u(a,n,o,i,l,"throw",e)}i(void 0)}))}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class v{get dataUrl(){return`${this.instanceSettings.url}/v2/query/net/${this.instanceSettings.jsonData.networkId||1}/data`}get pingUrl(){return`${this.instanceSettings.url}/v2/ping/net/${this.instanceSettings.jsonData.networkId||1}/test`}static generateTarget(e,t="json",r="A",n){return b(m({},n),{nsgql:e,format:t,id:r})}static normalize(e,t){return(e=Array.isArray(e)?e:[e]).map((e=>v.generateTarget(e,t)))}ping(){var e=this;return d((function*(){return e._request(e.pingUrl,void 0,"GET")}))()}queryDataTable(e){var t=this;return d((function*(){const r=v.normalize(e,"table").map(((e,t)=>b(m({},e),{id:String.fromCharCode("A".charCodeAt(0)+t)})));return t.dataRequest(r).then((({data:e})=>e))}))()}queryDataJSON(e){var t=this;return d((function*(){return t.dataRequest(v.normalize(e,"json")).then((({data:e})=>e))}))()}queryDataList(e){var t=this;return d((function*(){const r=v.normalize(e,"list").map(((e,t)=>b(m({},e),{id:String.fromCharCode("A".charCodeAt(0)+t)})));return t.dataRequest(r).then((({data:e})=>e))}))()}dataRequest(e){var t=this;return d((function*(){return t._request(t.dataUrl,{targets:e},"POST")}))()}_request(e,t,r){if("direct"===this.instanceSettings.access){const{accessToken:n,useToken:o,addTokenToHeader:a}=this.instanceSettings.jsonData,i={},l={};return n&&o&&(a?i["X-NSG-Auth-API-Token"]=n:l.access_token=n),(0,c.firstValueFrom)(this.backendService.fetch({url:e,data:t,method:r,headers:i,params:l}))}return(0,c.firstValueFrom)(this.backendService.fetch({url:e,data:t,method:r}))}queryTimeSeries(e){var t=this;return d((function*(){return(0,c.firstValueFrom)(t.backendService.fetch({url:t.dataUrl,method:"POST",data:{targets:e}})).then((r=>{if(200===r.status){const n=t.proccessNsgQlErrors(r.data,e.map((({id:e})=>e)));return{data:r.data.filter((e=>!("error"in e))),errors:n}}return{data:[]}}))}))()}proccessNsgQlErrors(e,t){const r=new Set(e.filter((e=>!("error"in e))).map((e=>e.id))),n=e.filter((e=>"error"in e)).map((({error:e,id:t})=>({message:e,refId:t})));return n.length?t.map((e=>{if(!r.has(e)){const t=n.shift();if(t)return{refId:(null==t?void 0:t.refId)||e,message:null==t?void 0:t.message}}})).filter((e=>!!e)):[]}constructor(e,t){p(this,"instanceSettings",void 0),p(this,"backendService",void 0),this.instanceSettings=e,this.backendService=t}}const h={category:"Select Category",variable:"Select Variable",column:"Select Column",device:"Select Device",component:"Select Cmponent",groupByType:"Select Type",groupBy:"Select Value",orderBy:"Select Value",selectItem:"Select Item",whereValue:"Select Value",removeTag:"-- Remove Tag Filter --",clearSelection:"-- Clear Selection --",blankDropDownElement:"---"},y={variable:"Select Monitoring Variable",select:"Click `+` to add column. Drag-n-drop columns to reorder. Click menu to add functions and column alias.",groupBy:"Choose column to group alias by. Grouped values are passed as arguments to aggregation functions used with columns in SELECT. You can group by a column that does not appear in SELECT.",limit:"Restrict number of time series returned by this query. Limit is applied after sorting. If this field is empty, result is unrestricted, however the server may apply its own restriction to avoid sending thousands of time series to Grafana",alias:"You can use '$device', '$component', '$description', or a tag facet name in 'Alias by' field",regex:"Enter regex using format ^.*$"},x="Naming pattern",O="$_timeFilter",E="$_interval",w="$_adhoc",I="$__all",D=[{label:E,value:E},{label:"1s",value:"1s"},{label:"1m",value:"1m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],S=[{label:"address",value:"address"},{label:"boxDescr",value:"boxDescr"},{label:"combinedRoles",value:"combinedRoles"},{label:"combinedNsgRoles",value:"combinedNsgRoles"},{label:"component",value:"component"},{label:"device",value:"device"},{label:"description",value:"description"},{label:"discoveryTime",value:"discoveryTime"},{label:"freshness",value:"freshness"},{label:"metric",value:"metric"},{label:"name",value:"name"},{label:"time",value:"time"},{label:"stale",value:"stale"}],A=[{label:"Transformation",options:[{label:"to_long",value:"to_long"},{label:"ifnan",value:"ifnan"},{label:"ifnull",value:"ifnull"}]},{label:"Aggregation",options:[{label:"avg",value:"avg"},{label:"median",value:"median"},{label:"min",value:"min"},{label:"max",value:"max"},{label:"sum",value:"sum"},{label:"count",value:"count"}]},{label:"Aggregation By Time",options:[{label:"tslast",value:"tslast"},{label:"tsmin",value:"tsmin"},{label:"tsmax",value:"tsmax"},{label:"tsavg",value:"tsavg"},{label:"tsmedian",value:"tsmedian"},{label:"tspercentile95",value:"tspercentile95"},{label:"tslinear",value:"tslinear"},{label:"sma",value:"sma"},{label:"cumulative_sum",value:"cumulative_sum"},{label:"loess",value:"loess"}]}];var C=g(6397),P=g.n(C),j=g(3241),N=g.n(j);const B="_col",T="col_";function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function L(e,t){return String(e).toLowerCase()===String(t).toLowerCase()}function F(e,t=!1){if(!e)return(0,r.dateTime)("now");if("string"==typeof e){var n;if("now"===e)return"now";const o=/^now-(\d+)([d|h|m|s])$/.exec(e);if(o){return`now-${parseInt(o[1],10)}${o[2]}`}return null===(n=r.dateMath.toDateTime(e,{roundUp:t}))||void 0===n?void 0:n.valueOf()}return e.valueOf()}function k(e){if("time_series"===e.format){const t={},r=[];if("isMultiColumnMode"in e||(t.isMultiColumnMode=!0),e.columns.find((({name:e})=>"time"===e))||r.push({name:"time",visible:!0,id:(0,j.uniqueId)(B)}),e.columns.find((({name:e})=>"metric"===e))||r.push({id:(0,j.uniqueId)(B),name:"metric",visible:!0,appliedFunctions:[{name:"tsavg"}]}),e.groupBy.value===h.groupBy&&e.groupBy.type===h.groupByType&&(t.groupBy=_(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){R(e,t,r[t])}))}return e}({},e.groupBy),{type:"time",value:"$_interval"})),r.length&&(t.columns=[...e.columns].concat(r)),Object.keys(t).length)return t}return null}function M(e){if(Array.isArray(e)){if(1!==e.length)return`${e.join("', '")}`;e=e[0]}return e}function G(e={}){return(0,j.merge)({type:"nsgql",columns:[{name:"time",visible:!1,id:(0,j.uniqueId)(B)},{name:"metric",appliedFunctions:[{name:"tsavg"}]}],variable:h.variable,orderBy:{column:{name:"",value:"",alias:""},sort:"ASC",colName:h.orderBy,colValue:h.orderBy},rawQuery:0,alias:"",limit:null,tags:[],groupBy:{type:h.groupByType,value:h.groupBy},isSeparatedColumns:!1,disableAdHoc:!1,format:"time_series"},e)}var $=g(8953),U=g.n($),W=g(7571),H=g.n(W);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class z{columnsSQL(e){return"SELECT * FROM "+s(e)+" LIMIT 0"}variablesSQL(){return new l({select:["*"],distinct:!0,from:"variables",where:[i.AND,{category:[i.NOT_EQ,""]}],orderBy:["category"]}).compile()}facetsSQL(e){return new l({select:["tagFacet"],distinct:!0,from:e,orderBy:["tagFacet"],where:[i.AND,{tagFacet:[i.NOT_NULL]}]}).compile()}getTagKeysForAdHocSQL(){return new l({select:["facet"],from:"tags",orderBy:["facet"]}).compile()}getTagValuesForAdHoc(e){return[new l({select:[e],distinct:!0,from:"devices",where:{[e]:[i.NOT_NULL]},orderBy:[e]}).compile(),new l({select:[e],distinct:!0,from:"interfaces",where:{[e]:[i.NOT_NULL]},orderBy:[e]}).compile()]}suggestionSQL(e,t,r=[],n={}){const o=(new l).setDistinct(!0).from(t).select([e]).orderBy([e]);switch(e){case"device":case"component":o.where(this.generateWhereFromTags(r,n));break;default:o.where([i.AND,{[e]:[i.NOT_NULL]},this.generateWhereFromTags(r,n)])}return o.compile()}generateWhereFromTags(e,t={}){let r=[];const n=(this.templateSrv.getVariables()||[]).filter((e=>"adhoc"===e.type)).map((e=>e.name));return n.length&&(e=e.filter((e=>{const t=e.key.replace(/^\$/,""),r=(Array.isArray(e.value)?e.value.join(""):"").replace(/^\$/,"");return-1===n.indexOf(t)&&-1===n.indexOf(r)}))),e.map((e=>function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){V(e,t,r[t])}))}return e}({},e))).forEach((e=>{"string"==typeof e.value&&e.value&&"$"===e.value[0]&&(e.value=this.getTemplateValue(e.value,t),N().isArray(e.value)&&(1===e.value.length?e.value=e.value[0]:e.value.length>1&&(e.operator=function(e){switch(e){case i.EQ:return i.IN;case i.NOT_EQ:case i.NOT_EQ2:return i.NOT_IN;default:return e}}(e.operator))));const n="string"==typeof e.value&&L(e.value,h.whereValue);n||(e.condition&&r.push(e.condition),N().isArray(e.value)?r.push({[e.key]:[e.operator,...e.value]}):r.push({[e.key]:[e.operator,e.value]})),n&&[i.NOT_NULL,i.IS_NULL].includes(e.operator)&&r.push({[e.key]:[e.operator]})})),r.length?(r.unshift("AND"),r):null}generateSQLQuery(e,t,r=!1){var n,o;let a=null,s=N().isArray(e.columns)?e.columns:[];const c=new l,u=r?O:{time:[i.BETWEEN,null===(n=t.timeRange)||void 0===n?void 0:n.from,null===(o=t.timeRange)||void 0===o?void 0:o.to]};return t.adHoc&&t.adHoc.length&&!e.disableAdHoc&&(a=r?w:this.generateWhereFromTags(t.adHoc,t.scopedVars)),s.length&&(s=s.filter((e=>!L(e.name,h.column)))),0===s.length||L(e.variable,h.variable)?null:(c.select(s.map((e=>this.processColumn(e,!0)))),c.from(e.variable),c.where([i.AND,this.generateWhereFromTags(e.tags,t.scopedVars),a,u]),e.limit&&(0,j.isNumber)(e.limit)&&c.limit(e.limit),e.orderBy.column&&e.orderBy.column.value&&!L(e.orderBy.column.value,h.orderBy)?c.orderBy([`${l.escape(e.orderBy.column.alias||e.orderBy.column.value)} ${e.orderBy.sort}`]):c.orderBy([]),e.groupBy.value&&e.groupBy.value.toLowerCase()!==h.groupBy.toLowerCase()?c.groupBy([this.generateGroupByValue(e,t,r)]):c.groupBy([]),c.compile())}replaceVariables(e,t={}){const r=/\$(\w+)|\[\[([\s\S]+?)\]\]/g,n=/REGEXP['"\s]+$/gi;let o;for(;o=r.exec(e);){const[r]=o;if(/^\$_/.test(r))continue;let a=this.getTemplateValue(r,t);if(("string"!=typeof a||!/^\$_/.test(a))&&a){let t=e.substring(o.index-1,o.index),i=/['"]{1}/.test(t);N().isArray(a)||(a=[a]),a=n.test(e.substring(0,o.index))?a.join("|"):i?a.join(`${t}, ${t}`):a.join(", "),e=e.replace(r,a)}}return e}generateSQLQueryFromString(e,t){var r,n;const o=`time BETWEEN '${null===(r=t.timeRange)||void 0===r?void 0:r.from}' AND '${null===(n=t.timeRange)||void 0===n?void 0:n.to}'`,a=`${t.interval}`,i=l.buildWhere(this.generateWhereFromTags(t.adHoc||[],t.scopedVars));let s=this.replaceVariables(e.nsgqlString,t.scopedVars);if(s&&s.indexOf(O)>0&&(s=N().replace(s,O,o)),s&&s.indexOf(w)>0){const e=i?`( ${i} )`:"";s=N().replace(s,w,e)}return s&&s.indexOf(E)>0&&(s=N().replace(s,E,a)),s=this.removeExtraConditionStatements(s),s}generateGroupByValue(e,t,r=!1){if("time"===e.groupBy.type){return`time(${e.groupBy.value!==E||r?e.groupBy.value:t.interval})`}return e.groupBy.value}correctAdhoc(e){return e.map((e=>{switch(e.operator){case"=~":e.operator=i.REGEXP;break;case"!~":e.operator=i.NOT_REGEXP}return e}))}removeExtraConditionStatements(e){return e.replace(/\s+(and)\s+and\s+/gi," $1 ").replace(/\s+(or)\s+or\s+/gi," $1 ").replace(/\s+((and|or)[\s]+)(group|order|limit)\s+/gi," $3 ").replace(/\s+(where)[\s]+(and|or)\s+/gi," $1 ")}processColumn(e,t=!1){if(H()(e))return e;if(U()(e)&&!Array.isArray(e)){let r=function(e){let t=e.name;return e.appliedFunctions&&P()(e.appliedFunctions)&&e.appliedFunctions.length&&(t=`${e.appliedFunctions.map((e=>e.name)).join("(")}(${t}${")".repeat(e.appliedFunctions.length)}`),t}(e);if(e.alias)r+=` as ${l.escape(e.alias)}`;else if(t){let t=function(e){let t=e.name;return e.appliedFunctions&&P()(e.appliedFunctions)&&e.appliedFunctions.length&&(t=`${e.appliedFunctions.map((e=>e.name)).join("_")}_${t}`),t}(e);t!==r&&(r+=` as ${l.escape(t)}`)}return r}throw new Error("Unknow column type!")}getTemplateValue(e,t){const r=e.substring(1);var n;if(r in t)return null===(n=t[r])||void 0===n?void 0:n.value;const o=N().find(this.templateSrv.getVariables(),{name:r});if(o){const e=o.current.value;return o.includeAll&&("string"==typeof e&&e===I||Array.isArray(o.current.value)&&o.current.value.includes(I))?(o.options||[]).map((({value:e})=>e)):N().cloneDeep(o.current.value)}return e}constructor(e){V(this,"templateSrv",void 0),this.templateSrv=e}}function q(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){q(a,n,o,i,l,"next",e)}function l(e){q(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class X extends r.DataSourceApi{getSQLString(e){return this.zsHelper.generateSQLQuery(e,{},!0)||""}getSeriesName(e,t){return(t=this.templateService.replace(t)).replace(/\$(\w+)|\[\[([\s\S]+?)]]/g,(function(t,...r){const n=r[0]||r[1];if(!n)return t;switch(n){case"m":case"measurement":case"variable":return e.variable;case"device":return e.device;case"component":return e.component;case"description":return e.description}return e[n]?e[n]:"object"==typeof e.tags&&e.tags&&e.tags[n]?e.tags[n]:t}))}getNSGVariables(){var e=this;return Q((function*(){return e.zsApi.queryDataJSON(e.zsHelper.variablesSQL()).then((e=>{const t=Array.isArray(e)&&e[0];return t?(0,j.groupBy)(t.rows,"category"):{}})).catch((()=>({})))}))()}getTagsFacets(e){var t=this;return Q((function*(){return t.zsApi.queryDataList(t.zsHelper.facetsSQL(e)).catch((()=>[]))}))()}getSuggestions(e,t){var r=this;return Q((function*(){return r.zsApi.queryDataList(r.zsHelper.suggestionSQL(t,e,[],{}))}))()}getDefaultQuery(e){return{_nsgTarget:G()}}filterQuery(e){const t=e._nsgTarget;if(!t)return!1;if(L(t.variable,h.variable))return!1;return 0!==(t.columns||[]).filter((e=>!L(e.name,h.column))).length}query(e){var t=this;return Q((function*(){const{targets:r,rangeRaw:n}=e,o={from:F(null==n?void 0:n.from,!1),to:F(null==n?void 0:n.to,!0)},a={},i=t.zsHelper.correctAdhoc(e.filters||[]),l={timeRange:o,interval:e.interval,adHoc:i,scopedVars:e.scopedVars},s=r.filter((({hide:e})=>!e)).map((({_nsgTarget:r,refId:n})=>{var o;if(!r)throw new Error("Empty target: "+n);let i=e.maxDataPoints&&"time_series"===r.format?e.maxDataPoints:void 0;a[n]=r.alias,r.orderBy&&"column"===(null===(o=r.orderBy.column)||void 0===o?void 0:o.name)&&(r.orderBy.column.value=r.orderBy.colValue);let s=r.rawQuery?t.zsHelper.generateSQLQueryFromString(r,l):t.zsHelper.generateSQLQuery(r,l);return s=t.templateService.replace(s,e.scopedVars,M),{id:n,format:r.format,nsgql:s,maxDataPoints:i}})).filter((({nsgql:e})=>Boolean(e)));return 0===s.length?Promise.resolve({data:[]}):t.zsApi.queryTimeSeries(s).then((e=>(e.data.forEach((e=>{e.refId=e.id;const r=a[e.id.toUpperCase()];e&&r&&(e.target=t.getSeriesName(e,r),delete e.tags)})),e)))}))()}getTagKeys(){var e=this;return Q((function*(){return e.zsApi.queryDataList(e.zsHelper.getTagKeysForAdHocSQL()).then((e=>e.map((e=>({text:e}))))).then((e=>({data:e})))}))()}getTagValues(e){var t=this;return Q((function*(){const r=t.zsHelper.getTagValuesForAdHoc(e.key);return t.zsApi.queryDataList(r).then((e=>Array.from(new Set(e)).map((e=>({text:e}))))).then((e=>({data:e})))}))()}metricFindQuery(e,t){var r=this;return Q((function*(){return r.zsApi.queryDataList(r.templateService.replace(e,{},M)).then((e=>e.map((e=>({text:e}))))).catch((()=>[]))}))()}testDatasource(){var e=this;return Q((function*(){const t="Cannot connect to API";try{const r=yield e.zsApi.ping();return 200===r.status?{status:"success",message:"Success"}:{status:"error",message:r.statusText?r.statusText:t}}catch(e){let r="";return"string"==typeof e?r=e:(0,n.isFetchError)(e)?(r="Fetch error: "+(e.statusText?e.statusText:t),e.data&&e.data.error&&e.data.error.code&&(r+=": "+e.data.error.code+". "+e.data.error.message)):r=`[${t}]: `+String(e).replace("TypeError: ",""),{status:"error",message:r}}}))()}constructor(e){super(e),Y(this,"zsApi",void 0),Y(this,"zsHelper",void 0),Y(this,"templateService",(0,n.getTemplateSrv)()),this.zsApi=new v(e,(0,n.getBackendSrv)()),this.zsHelper=new z(this.templateService)}}var K=g(5959),J=g.n(K),Z=g(2007);function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ee(e,t,r[t])}))}return e}function re(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}var ne=g(6089);function oe(e){return{inlineField:(0,ne.css)({"& > label:first-of-type":{color:e.colors.primary.text},"&:last-child":{marginRight:0}}),inlineField2:(0,ne.css)({"& > label:first-of-type":{color:e.colors.primary.text},"& > div":{flex:"auto"},"&:last-child":{marginRight:0}}),inlineLabel:(0,ne.css)({cursor:"pointer","&:active":{color:e.colors.primary.contrastText}})}}const ae=(0,ne.css)({marginRight:0}),ie=(0,ne.css)({display:"inline-flex",alignItems:"center",justifyContent:"center"});function le({children:e,selected:t,disabled:r,loading:n,options:o,allowCustomValue:a,onSelect:i,onLabelClick:l}){const[s,c]=(0,K.useState)(!1),u=(0,Z.useStyles2)(oe);return J().createElement(J().Fragment,null,s&&J().createElement(J().Fragment,null,n&&J().createElement(Z.LoadingPlaceholder,{text:"",style:{margin:0}}),J().createElement(Z.Cascader,{autoFocus:!0,allowCustomValue:a,alwaysOpen:!0,changeOnSelect:!1,isClearable:!1,hideActiveLevelLabel:!1,displayAllSelectedLevels:!1,onSelect:function(e){if(function e(t,r){var n;if("items"in t&&(null===(n=t.items)||void 0===n?void 0:n.length))for(const n of t.items){const t=e(n,r);if(t)return t}else if(t.value===r)return t}({items:o,label:"_root",value:"_root"},e))return i(e),void c(!1);a&&(i(e),c(!1))},options:n?[{label:"Loading...",value:"loading",disabled:!0}]:o,initialValue:t,onBlur:function(){c(!1)},disabled:r})),!s&&J().createElement("div",{className:ie,onClick:function(){null==l||l(),c(!0)}},null!=e?e:J().createElement(Z.InlineLabel,{className:(0,ne.cx)(u.inlineLabel,ae)},t)))}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function ue({children:e,options:t,value:r,onChange:n}){const o=(0,Z.useStyles2)(oe),a=t.filter((e=>"divider"!==e)).map((e=>ce(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){se(e,t,r[t])}))}return e}({},e),{selelectable:!1,value:e.label,items:e.items})));return J().createElement(Z.InlineFieldRow,null,J().createElement(Z.InlineField,{labelWidth:12,label:"FROM",className:o.inlineField,tooltip:y.variable},J().createElement(le,{selected:r||h.variable,options:a,onSelect:e=>n(e)})),J().createElement(Z.InlineField,{grow:!0,className:o.inlineField},J().createElement(Z.InlineLabel,null,J().createElement(Z.Tooltip,{content:y.variable,placement:"top-start"},J().createElement(Z.Icon,{name:"question-circle"})))),e)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){de(e,t,r[t])}))}return e}function ge(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function fe({value:e,onChange:t,options:r}){const n=(0,Z.useStyles2)(oe),o=e.type===h.groupByType&&e.value===h.groupBy;return J().createElement(Z.SegmentSection,{label:"GROUP BY",fill:!1},J().createElement(Z.InlineSegmentGroup,null,J().createElement(Z.Segment,{options:[{label:"Time",value:"time"},{label:"Column",value:"column"}],value:e.type,onChange:e=>t({type:e.value,value:h.groupBy})}),"time"===e.type&&J().createElement(Z.SegmentAsync,{value:e.value,onChange:r=>t(ge(pe({},e),{value:r.value})),loadOptions:function(e){return Promise.resolve(D)}}),"column"===e.type&&J().createElement(le,{options:r,selected:e.value,onSelect:r=>t(ge(pe({},e),{value:r}))})),!o&&J().createElement("div",{className:"gf-form-label"},J().createElement(Z.IconButton,{className:ae,name:"times",size:"lg",onClick:()=>t(G().groupBy),tooltip:"Clear GroupBy",tooltipPlacement:"top"})),J().createElement(Z.InlineField,{className:n.inlineField,grow:!0},J().createElement(Z.InlineLabel,{className:ae},J().createElement(Z.Tooltip,{content:y.groupBy,placement:"top-start"},J().createElement(Z.Icon,{name:"question-circle"})))))}function me({options:e,selected:t,onSelect:r,children:n,placement:o,onLabelClick:a}){const i=(0,Z.useStyles2)(oe),l=(0,K.useMemo)((()=>e.map((e=>be(e,t,r)))),[e,t,r]),s=n||J().createElement(Z.InlineLabel,{className:i.inlineLabel},t);return J().createElement(Z.Dropdown,{overlay:J().createElement(Z.Menu,null,l),placement:o||"right-end"},J().createElement("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},onClickCapture:()=>null==a?void 0:a()},s))}function be(e,t,r){var n,o;return"divider"===e?J().createElement(Z.Menu.Divider,null):J().createElement(Z.Menu.Item,{label:e.label,key:e.label,active:null==e||null===(n=e.options)||void 0===n?void 0:n.some((e=>"divider"!==e&&t===e.value)),childItems:null==e||null===(o=e.options)||void 0===o?void 0:o.map((e=>be(e,t,r))),onClick:()=>{var t;!e.interactive&&(null===(t=e.options)||void 0===t?void 0:t.length)||r(e)}})}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ve(e,t,r[t])}))}return e}function ye(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function xe({value:e,onChange:t,options:r}){const n=(0,Z.useStyles2)(oe);const o=e.colName===h.orderBy;return J().createElement(Z.InlineFieldRow,null,J().createElement(Z.InlineField,{label:"ORDER BY",labelWidth:12,className:n.inlineField},J().createElement(le,{selected:e.colName||h.orderBy,onSelect:function(r){const n={name:r,value:r,alias:""},o=ye(he({},e),{column:n,colName:n.alias||n.name});t(o)},options:r})),!o&&J().createElement(Z.InlineField,null,J().createElement(Z.Stack,{gap:.25,direction:"row"},J().createElement(me,{placement:"auto",selected:e.sort||h.orderBy,onSelect:function(r){t(ye(he({},e),{sort:r.value}))},options:[{label:"ASC",value:"ASC"},{label:"DESC",value:"DESC"}]},J().createElement(Z.InlineLabel,{className:(0,ne.cx)(n.inlineLabel,ae),as:"span"},e.sort,J().createElement(Z.Icon,{name:"DESC"===e.sort?"sort-amount-down":"sort-amount-up"}))))),!o&&J().createElement("div",{className:"gf-form-label"},J().createElement(Z.IconButton,{className:ae,name:"times",size:"lg",onClick:()=>t(G().orderBy),tooltip:"Clear OrderBy",tooltipPlacement:"top"})),J().createElement(Z.InlineField,{grow:!0,className:n.inlineField},J().createElement(Z.InlineLabel,{className:ae},J().createElement(J().Fragment,null))))}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Oe(e,t,r[t])}))}return e}function we(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ie=[{label:i.EQ,value:i.EQ},{label:i.NOT_EQ,value:i.NOT_EQ},{label:i.NOT_EQ2,value:i.NOT_EQ2},{label:i.LT,value:i.LT},{label:i.GT,value:i.GT},{label:i.REGEXP,value:i.REGEXP},{label:i.IS_NULL,value:i.IS_NULL},{label:i.NOT_NULL,value:i.NOT_NULL}],De=[{label:i.AND,value:i.AND},{label:i.OR,value:i.OR}];function Se(e){return{wherePartMain:(0,ne.css)({display:"flex",gap:e.spacing(1)}),condButton:(0,ne.css)({paddingLeft:e.spacing(1),paddingRight:e.spacing(1),color:e.colors.primary.text}),activeText:(0,ne.css)({display:"inline-block",cursor:"pointer","&:hover":{color:e.colors.text.maxContrast}})}}const Ae=[i.REGEXP,i.NOT_REGEXP],Ce=[i.IS_NULL,i.NOT_NULL];function Pe({tag:e,options:t,showConditionButton:r=!1,loadSuggestions:n,onChange:o,onRemove:a}){const i=!Ce.includes(e.operator),l=Ae.includes(e.operator),s=!l,c=(0,Z.useStyles2)(Se),[u,d]=(0,K.useState)([]),[p,g]=(0,K.useState)(!1),[f,m]=(0,K.useState)(l&&e.value?e.value:"");function b(){f!==e.value&&o(we(Ee({},e),{value:f.trim()}))}return J().createElement(J().Fragment,null,r&&J().createElement(me,{placement:"auto",selected:e.operator,onSelect:t=>o(we(Ee({},e),{condition:t.value})),options:De},J().createElement(Z.Button,{className:c.condButton,type:"button",variant:"secondary"},e.condition)),J().createElement(Z.InlineLabel,{className:(0,ne.cx)(ae,c.wherePartMain),width:"auto",as:"div"},J().createElement(le,{options:t,onSelect:t=>o(we(Ee({},e),{key:t}))},J().createElement("span",{className:c.activeText},e.key)),J().createElement(me,{placement:"auto",selected:e.operator,onSelect:function(t){const r=we(Ee({},e),{operator:t.value});return Ae.includes(e.operator)===Ae.includes(t.value)&&Ce.includes(e.operator)===Ce.includes(t.value)||(r.value=""),o(r)},options:Ie},J().createElement(Z.Button,{tooltip:"Change Operator",size:"sm",variant:"secondary"},e.operator)),i&&J().createElement(J().Fragment,null,l&&J().createElement(Z.Tooltip,{content:y.regex,placement:"top",theme:"info-alt",interactive:!0},J().createElement(Z.Input,{size:Math.max(5,f.length+3),value:f,onChange:e=>m(e.target.value),onKeyDownCapture:e=>"Enter"===e.key&&b(),onBlurCapture:b,maxLength:50,placeholder:"^.*$"})),s&&J().createElement(le,{onSelect:t=>o(we(Ee({},e),{value:t})),onLabelClick:()=>function(e){g(!0),n(e.key).then((e=>d(e))).finally((()=>g(!1)))}(e),loading:p,allowCustomValue:!0,options:u},J().createElement("span",{className:c.activeText},e.value))),J().createElement(Z.IconButton,{className:ae,tooltip:"Remove section",name:"trash-alt",onClick:()=>a(e)})))}function je({variable:e,value:t,options:r,datasource:n,onChange:o}){const a=(0,Z.useStyles2)(oe);function l(t){return n.getSuggestions(e,t).then((e=>e.map((e=>({label:e,value:e})))))}const s=t.map(((e,n)=>J().createElement(Pe,{key:`${n}_${e.key}_${e.operator}_${e.value}_${e.condition}`,tag:e,options:r,showConditionButton:n>0,loadSuggestions:l,onRemove:()=>function(e){const r=[...t];r.splice(e,1),o(r)}(n),onChange:e=>function(e,r){const n=[...t];n.splice(r,1,e),o(n)}(e,n)})));return J().createElement(Z.InlineFieldRow,null,J().createElement(Z.InlineField,{className:a.inlineField,grow:!0,shrink:!0,label:"WHERE",labelWidth:12},J().createElement(Z.Stack,{direction:"row",gap:.5,wrap:"wrap"},s,J().createElement(le,{options:r,onSelect:function(e){o(t.concat([{key:e,condition:t.length>0?i.OR:"",operator:i.EQ,value:h.whereValue}]))}},J().createElement("div",{className:"gf-form-label"},J().createElement(Z.IconButton,{className:ae,tooltip:"Add Criteria",name:"plus",size:"lg",variant:"secondary"}))))))}var Ne=function(){return Ne=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ne.apply(this,arguments)};Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;function Be(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={loading:!1});var n,o,a=(0,K.useRef)(0),i=(n=(0,K.useRef)(!1),o=(0,K.useCallback)((function(){return n.current}),[]),(0,K.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),o),l=(0,K.useState)(r),s=l[0],c=l[1],u=(0,K.useCallback)((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=++a.current;return s.loading||c((function(e){return Ne(Ne({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return i()&&n===a.current&&c({value:e,loading:!1}),e}),(function(e){return i()&&n===a.current&&c({error:e,loading:!1}),e}))}),t);return[s,u]}function Te(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function Re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Te(a,n,o,i,l,"next",e)}function l(e){Te(a,n,o,i,l,"throw",e)}i(void 0)}))}}function _e(e,t){const r=function(e,t){void 0===t&&(t=[]);var r=Be(e,t,{loading:!0}),n=r[0],o=r[1];return(0,K.useEffect)((function(){o()}),[o]),n}(Re((function*(){return e===h.variable?Promise.resolve([]):yield t.getTagsFacets(e)})),[t,e]);var n;return{loading:r.loading,tagsFacets:null!==(n=r.value)&&void 0!==n?n:[],error:r.error}}var Le=g(8398),Fe=g.n(Le),ke=g(7694),Me=g(200);function Ge(e,t){var r=(0,K.useState)((function(){return{inputs:t,result:e()}}))[0],n=(0,K.useRef)(!0),o=(0,K.useRef)(r),a=n.current||Boolean(t&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,o.current.inputs))?o.current:{inputs:t,result:e()};return(0,K.useEffect)((function(){n.current=!1,o.current=a}),[a]),a.result}var $e=Ge,Ue=function(e,t){return Ge((function(){return e}),t)},We="Invariant failed";var He=function(e){var t=e.top,r=e.right,n=e.bottom,o=e.left;return{top:t,right:r,bottom:n,left:o,width:r-o,height:n-t,x:o,y:t,center:{x:(r+o)/2,y:(n+t)/2}}},Ve=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},ze=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},qe={top:0,right:0,bottom:0,left:0},Qe=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?qe:r,o=e.border,a=void 0===o?qe:o,i=e.padding,l=void 0===i?qe:i,s=He(Ve(t,n)),c=He(ze(t,a)),u=He(ze(c,l));return{marginBox:s,borderBox:He(t),paddingBox:c,contentBox:u,margin:n,border:a,padding:l}},Ye=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&function(e){if(!e)throw new Error(We)}(!1),r},Xe=function(e,t){var r,n,o=e.borderBox,a=e.border,i=e.margin,l=e.padding,s=(n=t,{top:(r=o).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return Qe({borderBox:s,border:a,margin:i,padding:l})},Ke=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Xe(e,t)},Je=function(e,t){var r={top:Ye(t.marginTop),right:Ye(t.marginRight),bottom:Ye(t.marginBottom),left:Ye(t.marginLeft)},n={top:Ye(t.paddingTop),right:Ye(t.paddingRight),bottom:Ye(t.paddingBottom),left:Ye(t.paddingLeft)},o={top:Ye(t.borderTopWidth),right:Ye(t.borderRightWidth),bottom:Ye(t.borderBottomWidth),left:Ye(t.borderLeftWidth)};return Qe({borderBox:e,margin:r,padding:n,border:o})},Ze=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return Je(t,r)},et=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function tt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],o=t[r],!(n===o||et(n)&&et(o)))return!1;var n,o;return!0}function rt(e,t){void 0===t&&(t=tt);var r=null;function n(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var a=e.apply(this,n);return r={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){r=null},n}const nt=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=o,r||(r=requestAnimationFrame((function(){r=null,e.apply(void 0,t)})))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ot.apply(null,arguments)}function at(e,t){}at.bind(null,"warn"),at.bind(null,"error");function it(){}function lt(e,t,r){const n=t.map((t=>{const n=function(e,t){return{...e,...t}}(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}}));return function(){n.forEach((e=>{e()}))}}const st="Invariant failed";class ct extends Error{}function ut(e,t){throw new ct(st)}ct.prototype.toString=function(){return this.message};class dt extends J().Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=it,this.onWindowError=e=>{const t=this.getCallbacks();t.isDragging()&&t.tryAbort();e.error instanceof ct&&e.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=lt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(!(e instanceof ct))throw e;this.setState({})}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const pt=e=>e+1,gt=(e,t)=>{const r=e.droppableId===t.droppableId,n=pt(e.index),o=pt(t.index);return r?`\n      You have moved the item from position ${n}\n      to position ${o}\n    `:`\n    You have moved the item from position ${n}\n    in list ${e.droppableId}\n    to list ${t.droppableId}\n    in position ${o}\n  `},ft=(e,t,r)=>t.droppableId===r.droppableId?`\n      The item ${e}\n      has been combined with ${r.draggableId}`:`\n      The item ${e}\n      in list ${t.droppableId}\n      has been combined with ${r.draggableId}\n      in list ${r.droppableId}\n    `,mt=e=>`\n  The item has returned to its starting position\n  of ${pt(e.index)}\n`,bt={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:e=>`\n  You have lifted an item in position ${pt(e.source.index)}\n`,onDragUpdate:e=>{const t=e.destination;if(t)return gt(e.source,t);const r=e.combine;return r?ft(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},onDragEnd:e=>{if("CANCEL"===e.reason)return`\n      Movement cancelled.\n      ${mt(e.source)}\n    `;const t=e.destination,r=e.combine;return t?`\n      You have dropped the item.\n      ${gt(e.source,t)}\n    `:r?`\n      You have dropped the item.\n      ${ft(e.draggableId,e.source,r)}\n    `:`\n    The item has been dropped while not over a drop area.\n    ${mt(e.source)}\n  `}},vt={x:0,y:0},ht=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),yt=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),xt=(e,t)=>e.x===t.x&&e.y===t.y,Ot=e=>({x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}),Et=(e,t,r=0)=>"x"===e?{x:t,y:r}:{x:r,y:t},wt=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),It=(e,t)=>Math.min(...t.map((t=>wt(e,t)))),Dt=e=>t=>({x:e(t.x),y:e(t.y)});const St=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),At=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Ct=(e,t)=>t&&t.shouldClipSubject?((e,t)=>{const r=He({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r})(t.pageMarginBox,e):He(e);var Pt=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const o=((e,t)=>t?St(e,t.scroll.diff.displacement):e)(e.marginBox,n),a=((e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e)(o,r,t);return{page:e,withPlaceholder:t,active:Ct(a,n)}},jt=(e,t)=>{e.frame||ut();const r=e.frame,n=yt(t,r.scroll.initial),o=Ot(n),a={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:o},max:r.scroll.max}},i=Pt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:i}};const Nt=rt((e=>e.reduce(((e,t)=>(e[t.descriptor.id]=t,e)),{}))),Bt=rt((e=>e.reduce(((e,t)=>(e[t.descriptor.id]=t,e)),{}))),Tt=rt((e=>Object.values(e))),Rt=rt((e=>Object.values(e)));var _t=rt(((e,t)=>{const r=Rt(t).filter((t=>e===t.descriptor.droppableId)).sort(((e,t)=>e.descriptor.index-t.descriptor.index));return r}));function Lt(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Ft(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var kt=rt(((e,t)=>t.filter((t=>t.descriptor.id!==e.descriptor.id)))),Mt=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Gt={point:vt,value:0},$t={invisible:{},visible:{},all:[]},Ut={displaced:$t,displacedBy:Gt,at:null};var Wt=(e,t)=>r=>e<=r&&r<=t,Ht=e=>{const t=Wt(e.top,e.bottom),r=Wt(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),a=r(n.left)||r(n.right);if(o&&a)return!0;const i=n.top<e.top&&n.bottom>e.bottom,l=n.left<e.left&&n.right>e.right;if(i&&l)return!0;return i&&a||l&&o}},Vt=e=>{const t=Wt(e.top,e.bottom),r=Wt(e.left,e.right);return e=>t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)};const zt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},qt={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};const Qt=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:o})=>{const a=n?((e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:vt;return St(e,r)})(e,t):e;return((e,t,r)=>!!t.subject.active&&r(t.subject.active)(e))(a,t,o)&&((e,t,r)=>r(t)(e))(a,r,o)},Yt=e=>Qt({...e,isVisibleThroughFrameFn:Vt});function Xt({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:o,last:a}){return e.reduce((function(e,i){const l=function(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return He(Ve(r,n))}(i,r),s=i.descriptor.id;e.all.push(s);var c;if(!(c={target:l,destination:t,viewport:n,withDroppableDisplacement:!0},Qt({...c,isVisibleThroughFrameFn:Ht})))return e.invisible[i.descriptor.id]=!0,e;const u=((e,t,r)=>{if("boolean"==typeof r)return r;if(!t)return!0;const{invisible:n,visible:o}=t;if(n[e])return!1;const a=o[e];return!a||a.shouldAnimate})(s,a,o),d={draggableId:s,shouldAnimate:u};return e.visible[s]=d,e}),{all:[],visible:{},invisible:{}})}function Kt({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const o=function(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(e,{inHomeList:t});return{displaced:$t,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Jt({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:o,last:a,index:i,forceShouldAnimate:l}){const s=Mt(e,r);if(null==i)return Kt({insideDestination:t,inHomeList:s,displacedBy:o,destination:r});const c=t.find((e=>e.descriptor.index===i));if(!c)return Kt({insideDestination:t,inHomeList:s,displacedBy:o,destination:r});const u=kt(e,t),d=t.indexOf(c);return{displaced:Xt({afterDragging:u.slice(d),destination:r,displacedBy:o,last:a,viewport:n.frame,forceShouldAnimate:l}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Zt(e,t){return Boolean(t.effected[e])}var er=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:o,insideDestination:a,previousImpact:i,viewport:l,afterCritical:s})=>{const c=i.at;if(c||ut(),"REORDER"===c.type){const n=(({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const o=n.index,a=e?o+1:o-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return a<i||a>(t?l:l+1)?null:a})({isMovingForward:e,isInHomeList:t,location:c.destination,insideDestination:a});return null==n?null:Jt({draggable:r,insideDestination:a,destination:o,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:n})}const u=(({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const a=n.draggableId,i=r[a].descriptor.index;return Zt(a,o)?e?i:i-1:e?i+1:i})({isMovingForward:e,destination:o,displaced:i.displaced,draggables:n,combine:c.combine,afterCritical:s});return null==u?null:Jt({draggable:r,insideDestination:a,destination:o,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:u})},tr=({afterCritical:e,impact:t,draggables:r})=>{const n=Ft(t);n||ut();const o=n.draggableId,a=r[o].page.borderBox.center,i=(({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const o=Boolean(e.visible[r]||e.invisible[r]);return Zt(r,t)?o?vt:Ot(n.point):o?n.point:vt})({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return ht(a,i)};const rr=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,nr=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,or=({axis:e,moveRelativeTo:t,isMoving:r})=>Et(e.line,t.marginBox[e.end]+rr(e,r),nr(e,t.marginBox,r)),ar=({axis:e,moveRelativeTo:t,isMoving:r})=>Et(e.line,t.marginBox[e.start]-((e,t)=>t.margin[e.end]+t.borderBox[e.size]/2)(e,r),nr(e,t.marginBox,r));var ir=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o})=>{const a=_t(n.descriptor.id,r),i=t.page,l=n.axis;if(!a.length)return(({axis:e,moveInto:t,isMoving:r})=>Et(e.line,t.contentBox[e.start]+rr(e,r),nr(e,t.contentBox,r)))({axis:l,moveInto:n.page,isMoving:i});const{displaced:s,displacedBy:c}=e,u=s.all[0];if(u){const e=r[u];if(Zt(u,o))return ar({axis:l,moveRelativeTo:e.page,isMoving:i});const t=Xe(e.page,c.point);return ar({axis:l,moveRelativeTo:t,isMoving:i})}const d=a[a.length-1];if(d.descriptor.id===t.descriptor.id)return i.borderBox.center;if(Zt(d.descriptor.id,o)){const e=Xe(d.page,Ot(o.displacedBy.point));return or({axis:l,moveRelativeTo:e,isMoving:i})}return or({axis:l,moveRelativeTo:d.page,isMoving:i})},lr=(e,t)=>{const r=e.frame;return r?ht(t,r.scroll.diff.displacement):t};var sr=e=>{const t=(({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:o})=>{const a=t.page.borderBox.center,i=e.at;return r&&i?"REORDER"===i.type?ir({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o}):tr({impact:e,draggables:n,afterCritical:o}):a})(e),r=e.droppable;return r?lr(r,t):t},cr=(e,t)=>{const r=yt(t,e.scroll.initial),n=Ot(r);return{frame:He({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function ur(e,t){return e.map((e=>t[e]))}var dr=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=((e,t)=>ht(e.scroll.diff.displacement,t))(r,e),o=yt(n,t.page.borderBox.center);return ht(t.client.borderBox.center,o)},pr=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:o,onlyOnMainAxis:a=!1})=>{const i=yt(r,e.page.borderBox.center),l={target:St(e.page.borderBox,i),destination:t,withDroppableDisplacement:o,viewport:n};return a?(e=>{return Qt({...e,isVisibleThroughFrameFn:(t=e.destination.axis,e=>{const r=Wt(e.top,e.bottom),n=Wt(e.left,e.right);return e=>t===zt?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)})});var t})(l):Yt(l)},gr=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:o,viewport:a,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:s})=>{if(!r.isEnabled)return null;const c=_t(r.descriptor.id,n),u=Mt(t,r),d=(({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:o})=>{if(!r.isCombineEnabled)return null;if(!Lt(o))return null;function a(e){const t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return{...o,at:t}}const i=o.displaced.all,l=i.length?i[0]:null;if(e)return l?a(l):null;const s=kt(t,n);if(!l)return s.length?a(s[s.length-1].descriptor.id):null;const c=s.findIndex((e=>e.descriptor.id===l));-1===c&&ut();const u=c-1;return u<0?null:a(s[u].descriptor.id)})({isMovingForward:e,draggable:t,destination:r,insideDestination:c,previousImpact:o})||er({isMovingForward:e,isInHomeList:u,draggable:t,draggables:n,destination:r,insideDestination:c,previousImpact:o,viewport:a,afterCritical:s});if(!d)return null;const p=sr({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:s});if(pr({draggable:t,destination:r,newPageBorderBoxCenter:p,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})){return{clientSelection:dr({pageBorderBoxCenter:p,draggable:t,viewport:a}),impact:d,scrollJumpRequest:null}}const g=yt(p,i),f=(({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:o})=>{const a=cr(t,ht(t.scroll.current,o)),i=r.frame?jt(r,ht(r.frame.scroll.current,o)):r,l=e.displaced,s=Xt({afterDragging:ur(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),c=Xt({afterDragging:ur(l.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),u={},d={},p=[l,s,c];return l.all.forEach((e=>{const t=function(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}(e,p);t?d[e]=t:u[e]=!0})),{...e,displaced:{all:l.all,invisible:u,visible:d}}})({impact:d,viewport:a,destination:r,draggables:n,maxScrollChange:g});return{clientSelection:l,impact:f,scrollJumpRequest:g}};const fr=e=>{const t=e.subject.active;return t||ut(),t};const mr=(e,t)=>{const r=e.page.borderBox.center;return Zt(e.descriptor.id,t)?yt(r,t.displacedBy.point):r},br=(e,t)=>{const r=e.page.borderBox;return Zt(e.descriptor.id,t)?St(r,Ot(t.displacedBy.point)):r};var vr=rt((function(e,t){const r=t[e.line];return{value:r,point:Et(e.line,r)}}));const hr=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),yr=(e,t,r)=>{const n=e.frame;Mt(t,e)&&ut(),e.subject.withPlaceholder&&ut();const o=vr(e.axis,t.displaceBy).point,a=((e,t,r)=>{const n=e.axis;if("virtual"===e.descriptor.mode)return Et(n.line,t[n.line]);const o=e.subject.page.contentBox[n.size],a=_t(e.descriptor.id,r).reduce(((e,t)=>e+t.client.marginBox[n.size]),0)+t[n.line]-o;return a<=0?null:Et(n.line,a)})(e,o,r),i={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const t=Pt({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:t}}const l=a?ht(n.scroll.max,a):n.scroll.max,s=hr(n,l),c=Pt({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:s});return{...e,subject:c,frame:s}};var xr=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:o,droppables:a,viewport:i,afterCritical:l})=>{const s=(({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:o})=>{const a=r.subject.active;if(!a)return null;const i=r.axis,l=Wt(a[i.start],a[i.end]),s=Tt(n).filter((e=>e!==r)).filter((e=>e.isEnabled)).filter((e=>Boolean(e.subject.active))).filter((e=>Ht(o.frame)(fr(e)))).filter((t=>{const r=fr(t);return e?a[i.crossAxisEnd]<r[i.crossAxisEnd]:r[i.crossAxisStart]<a[i.crossAxisStart]})).filter((e=>{const t=fr(e),r=Wt(t[i.start],t[i.end]);return l(t[i.start])||l(t[i.end])||r(a[i.start])||r(a[i.end])})).sort(((t,r)=>{const n=fr(t)[i.crossAxisStart],o=fr(r)[i.crossAxisStart];return e?n-o:o-n})).filter(((e,t,r)=>fr(e)[i.crossAxisStart]===fr(r[0])[i.crossAxisStart]));if(!s.length)return null;if(1===s.length)return s[0];const c=s.filter((e=>Wt(fr(e)[i.start],fr(e)[i.end])(t[i.line])));return 1===c.length?c[0]:c.length>1?c.sort(((e,t)=>fr(e)[i.start]-fr(t)[i.start]))[0]:s.sort(((e,r)=>{const n=It(t,At(fr(e))),o=It(t,At(fr(r)));return n!==o?n-o:fr(e)[i.start]-fr(r)[i.start]}))[0]})({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:a,viewport:i});if(!s)return null;const c=_t(s.descriptor.id,o),u=(({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:o})=>{const a=n.filter((e=>Yt({target:br(e,o),destination:r,viewport:t.frame,withDroppableDisplacement:!0}))).sort(((t,n)=>{const a=wt(e,lr(r,mr(t,o))),i=wt(e,lr(r,mr(n,o)));return a<i?-1:i<a?1:t.descriptor.index-n.descriptor.index}));return a[0]||null})({pageBorderBoxCenter:t,viewport:i,destination:s,insideDestination:c,afterCritical:l}),d=(({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:o,destination:a,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const e={displaced:$t,displacedBy:Gt,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},t=sr({impact:e,draggable:n,droppable:a,draggables:o,afterCritical:l}),s=Mt(n,a)?a:yr(a,n,o);return pr({draggable:n,destination:s,newPageBorderBoxCenter:t,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?e:null}const s=Boolean(e[a.axis.line]<=t.page.borderBox.center[a.axis.line]),c=(()=>{const e=t.descriptor.index;return t.descriptor.id===n.descriptor.id||s?e:e+1})(),u=vr(a.axis,n.displaceBy);return Jt({draggable:n,insideDestination:r,destination:a,viewport:i,displacedBy:u,last:$t,index:c})})({previousPageBorderBoxCenter:t,destination:s,draggable:r,draggables:o,moveRelativeTo:u,insideDestination:c,viewport:i,afterCritical:l});if(!d)return null;const p=sr({impact:d,draggable:r,droppable:s,draggables:o,afterCritical:l});return{clientSelection:dr({pageBorderBoxCenter:p,draggable:r,viewport:i}),impact:d,scrollJumpRequest:null}},Or=e=>{const t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null};var Er=({state:e,type:t})=>{const r=((e,t)=>{const r=Or(e);return r?t[r]:null})(e.impact,e.dimensions.droppables),n=Boolean(r),o=e.dimensions.droppables[e.critical.droppable.id],a=r||o,i=a.axis.direction,l="vertical"===i&&("MOVE_UP"===t||"MOVE_DOWN"===t)||"horizontal"===i&&("MOVE_LEFT"===t||"MOVE_RIGHT"===t);if(l&&!n)return null;const s="MOVE_DOWN"===t||"MOVE_RIGHT"===t,c=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:d,droppables:p}=e.dimensions;return l?gr({isMovingForward:s,previousPageBorderBoxCenter:u,draggable:c,destination:a,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):xr({isMovingForward:s,previousPageBorderBoxCenter:u,draggable:c,isOver:a,draggables:d,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function wr(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Ir(e){const t=Wt(e.top,e.bottom),r=Wt(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function Dr({pageBorderBox:e,draggable:t,droppables:r}){const n=Tt(r).filter((t=>{if(!t.isEnabled)return!1;const r=t.subject.active;if(!r)return!1;if(o=r,!((n=e).left<o.right&&n.right>o.left&&n.top<o.bottom&&n.bottom>o.top))return!1;var n,o;if(Ir(r)(e.center))return!0;const a=t.axis,i=r.center[a.crossAxisLine],l=e[a.crossAxisStart],s=e[a.crossAxisEnd],c=Wt(r[a.crossAxisStart],r[a.crossAxisEnd]),u=c(l),d=c(s);return!u&&!d||(u?l<i:s>i)}));return n.length?1===n.length?n[0].descriptor.id:function({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,o=r.map((t=>{const r=t.axis,o=Et(t.axis.line,e.center[r.line],t.page.borderBox.center[r.crossAxisLine]);return{id:t.descriptor.id,distance:wt(n,o)}})).sort(((e,t)=>t.distance-e.distance));return o[0]?o[0].id:null}({pageBorderBox:e,draggable:t,candidates:n}):null}const Sr=(e,t)=>He(St(e,t));function Ar({displaced:e,id:t}){return Boolean(e.visible[t]||e.invisible[t])}var Cr=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:o,viewport:a,afterCritical:i})=>{const l=Sr(t.page.borderBox,e),s=Dr({pageBorderBox:l,draggable:t,droppables:n});if(!s)return Ut;const c=n[s],u=_t(c.descriptor.id,r),d=((e,t)=>{const r=e.frame;return r?Sr(t,r.scroll.diff.value):t})(c,l);return(({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:o,afterCritical:a})=>{if(!n.isCombineEnabled)return null;const i=n.axis,l=vr(n.axis,e.displaceBy),s=l.value,c=t[i.start],u=t[i.end],d=kt(e,o).find((e=>{const t=e.descriptor.id,n=e.page.borderBox,o=n[i.size]/4,l=Zt(t,a),d=Ar({displaced:r.displaced,id:t});return l?d?u>n[i.start]+o&&u<n[i.end]-o:c>n[i.start]-s+o&&c<n[i.end]-s-o:d?u>n[i.start]+s+o&&u<n[i.end]+s-o:c>n[i.start]+o&&c<n[i.end]-o}));return d?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:n.descriptor.id}}}:null})({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:o,destination:c,insideDestination:u,afterCritical:i})||(({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:o,viewport:a,afterCritical:i})=>{const l=r.axis,s=vr(r.axis,t.displaceBy),c=s.value,u=e[l.start],d=e[l.end],p=function({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}({draggable:t,closest:kt(t,n).find((e=>{const t=e.descriptor.id,r=e.page.borderBox.center[l.line],n=Zt(t,i),a=Ar({displaced:o,id:t});return n?a?d<=r:u<r-c:a?d<=r+c:u<r}))||null,inHomeList:Mt(t,r)});return Jt({draggable:t,insideDestination:n,destination:r,viewport:a,last:o,displacedBy:s,index:p})})({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:c,insideDestination:u,last:o.displaced,viewport:a,afterCritical:i})},Pr=(e,t)=>({...e,[t.descriptor.id]:t});const jr=({previousImpact:e,impact:t,droppables:r})=>{const n=Or(e),o=Or(t);if(!n)return r;if(n===o)return r;const a=r[n];if(!a.subject.withPlaceholder)return r;const i=(e=>{const t=e.subject.withPlaceholder;t||ut();const r=e.frame;if(!r){const t=Pt({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:t}}const n=t.oldFrameMaxScroll;n||ut();const o=hr(r,n),a=Pt({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:a,frame:o}})(a);return Pr(r,i)};var Nr=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:o,scrollJumpRequest:a})=>{const i=n||e.viewport,l=r||e.dimensions,s=t||e.current.client.selection,c=yt(s,e.initial.client.selection),u={offset:c,selection:s,borderBoxCenter:ht(e.initial.client.borderBoxCenter,c)},d={selection:ht(u.selection,i.scroll.current),borderBoxCenter:ht(u.borderBoxCenter,i.scroll.current),offset:ht(u.offset,i.scroll.diff.value)},p={client:u,page:d};if("COLLECTING"===e.phase)return{...e,dimensions:l,viewport:i,current:p};const g=l.draggables[e.critical.draggable.id],f=o||Cr({pageOffset:d.offset,draggable:g,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),m=(({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:o})=>{const a=jr({previousImpact:n,impact:o,droppables:r}),i=Or(o);if(!i)return a;const l=r[i];if(Mt(e,l))return a;if(l.subject.withPlaceholder)return a;const s=yr(l,e,t);return Pr(a,s)})({draggable:g,impact:f,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:p,dimensions:{draggables:l.draggables,droppables:m},impact:f,viewport:i,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null}};var Br=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:o})=>{const a=e.displaced,i=function(e,t){return e.map((e=>t[e]))}(a.all,r),l=Xt({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:a});return{...e,displaced:l}},Tr=({impact:e,draggable:t,droppable:r,draggables:n,viewport:o,afterCritical:a})=>{const i=sr({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:a});return dr({pageBorderBoxCenter:i,draggable:t,viewport:o})},Rr=({state:e,dimensions:t,viewport:r})=>{"SNAP"!==e.movementMode&&ut();const n=e.impact,o=r||e.viewport,a=t||e.dimensions,{draggables:i,droppables:l}=a,s=i[e.critical.draggable.id],c=Or(n);c||ut();const u=l[c],d=Br({impact:n,viewport:o,destination:u,draggables:i}),p=Tr({impact:d,draggable:s,droppable:u,draggables:i,viewport:o,afterCritical:e.afterCritical});return Nr({impact:d,clientSelection:p,state:e,dimensions:a,viewport:o})},_r=({draggable:e,home:t,draggables:r,viewport:n})=>{const o=vr(t.axis,e.displaceBy),a=_t(t.descriptor.id,r),i=a.indexOf(e);-1===i&&ut();const l=a.slice(i+1),s=l.reduce(((e,t)=>(e[t.descriptor.id]=!0,e)),{}),c={inVirtualList:"virtual"===t.descriptor.mode,displacedBy:o,effected:s};var u;return{impact:{displaced:Xt({afterDragging:l,destination:t,displacedBy:o,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:(u=e.descriptor,{index:u.index,droppableId:u.droppableId})}},afterCritical:c}};const Lr=e=>{0},Fr=e=>{0};var kr=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map((e=>{const o=e.descriptor.droppableId,a=(e=>{const t=e.frame;return t||ut(),t})(t[o]),i=a.scroll.diff.value,l=(({draggable:e,offset:t,initialWindowScroll:r})=>{const n=Xe(e.client,t),o=Ke(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:o}})({draggable:e,offset:ht(n,i),initialWindowScroll:r.scroll.initial});return l}))};const Mr=e=>"SNAP"===e.movementMode,Gr=(e,t,r)=>{const n=((e,t)=>({draggables:e.draggables,droppables:Pr(e.droppables,t)}))(e.dimensions,t);return!Mr(e)||r?Nr({state:e,dimensions:n}):Rr({state:e,dimensions:n})};function $r(e){return e.isDragging&&"SNAP"===e.movementMode?{...e,scrollJumpRequest:null}:e}const Ur={phase:"IDLE",completed:null,shouldFlush:!1};var Wr=(e=Ur,t)=>{if("FLUSH"===t.type)return{...Ur,shouldFlush:!0};if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&ut();const{critical:r,clientSelection:n,viewport:o,dimensions:a,movementMode:i}=t.payload,l=a.draggables[r.draggable.id],s=a.droppables[r.droppable.id],c={selection:n,borderBoxCenter:l.client.borderBox.center,offset:vt},u={client:c,page:{selection:ht(c.selection,o.scroll.initial),borderBoxCenter:ht(c.selection,o.scroll.initial),offset:ht(c.selection,o.scroll.diff.value)}},d=Tt(a.droppables).every((e=>!e.isFixedOnPage)),{impact:p,afterCritical:g}=_r({draggable:l,home:s,draggables:a.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:a,initial:u,current:u,isWindowScrollAllowed:d,impact:p,afterCritical:g,onLiftImpact:p,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&ut();return{...e,phase:"COLLECTING"}}if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&ut(),(({state:e,published:t})=>{Lr();const r=t.modified.map((t=>{const r=e.dimensions.droppables[t.droppableId];return jt(r,t.scroll)})),n={...e.dimensions.droppables,...Nt(r)},o=Bt(kr({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),a={...e.dimensions.draggables,...o};t.removals.forEach((e=>{delete a[e]}));const i={droppables:n,draggables:a},l=Or(e.impact),s=l?i.droppables[l]:null,c=i.draggables[e.critical.draggable.id],u=i.droppables[e.critical.droppable.id],{impact:d,afterCritical:p}=_r({draggable:c,home:u,draggables:a,viewport:e.viewport}),g=s&&s.isCombineEnabled?e.impact:d,f=Cr({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:g,viewport:e.viewport,afterCritical:p});Fr();const m={...e,phase:"DRAGGING",impact:f,onLiftImpact:d,dimensions:i,afterCritical:p,forceShouldAnimate:!1};return"COLLECTING"===e.phase?m:{...m,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}})({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;wr(e)||ut();const{client:r}=t.payload;return xt(r,e.current.client.selection)?e:Nr({state:e,clientSelection:r,impact:Mr(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return $r(e);if("COLLECTING"===e.phase)return $r(e);wr(e)||ut();const{id:r,newScroll:n}=t.payload,o=e.dimensions.droppables[r];if(!o)return e;const a=jt(o,n);return Gr(e,a,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;wr(e)||ut();const{id:r,isEnabled:n}=t.payload,o=e.dimensions.droppables[r];o||ut(),o.isEnabled===n&&ut();const a={...o,isEnabled:n};return Gr(e,a,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;wr(e)||ut();const{id:r,isCombineEnabled:n}=t.payload,o=e.dimensions.droppables[r];o||ut(),o.isCombineEnabled===n&&ut();const a={...o,isCombineEnabled:n};return Gr(e,a,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;wr(e)||ut(),e.isWindowScrollAllowed||ut();const r=t.payload.newScroll;if(xt(e.viewport.scroll.current,r))return $r(e);const n=cr(e.viewport,r);return Mr(e)?Rr({state:e,viewport:n}):Nr({state:e,viewport:n})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!wr(e))return e;const r=t.payload.maxScroll;if(xt(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&ut();const r=Er({state:e,type:t.type});return r?Nr({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){const r=t.payload.reason;"COLLECTING"!==e.phase&&ut();return{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if("DROP_ANIMATE"===t.type){const{completed:r,dropDuration:n,newHomeClientOffset:o}=t.payload;"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&ut();return{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:o,dimensions:e.dimensions}}if("DROP_COMPLETE"===t.type){const{completed:e}=t.payload;return{phase:"IDLE",completed:e,shouldFlush:!1}}return e};function Hr(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Vr=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),zr=()=>({type:"COLLECTION_STARTING",payload:null}),qr=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Qr=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Yr=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Xr=e=>({type:"MOVE",payload:e}),Kr=()=>({type:"MOVE_UP",payload:null}),Jr=()=>({type:"MOVE_DOWN",payload:null}),Zr=()=>({type:"MOVE_RIGHT",payload:null}),en=()=>({type:"MOVE_LEFT",payload:null}),tn=e=>({type:"DROP_COMPLETE",payload:e}),rn=e=>({type:"DROP",payload:e}),nn=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});const on="cubic-bezier(.2,1,.1,1)",an={drop:0,combining:.7},ln={drop:.75},sn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},cn=`${sn.outOfTheWay}s ${"cubic-bezier(0.2, 0, 0, 1)"}`,un={fluid:`opacity ${cn}`,snap:`transform ${cn}, opacity ${cn}`,drop:e=>{const t=`${e}s ${on}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${cn}`,placeholder:`height ${cn}, width ${cn}, margin ${cn}`},dn=e=>xt(e,vt)?void 0:`translate(${e.x}px, ${e.y}px)`,pn=dn,gn=(e,t)=>{const r=dn(e);if(r)return t?`${r} scale(${ln.drop})`:r},{minDropTime:fn,maxDropTime:mn}=sn,bn=mn-fn;const vn=({getState:e,dispatch:t})=>r=>n=>{if(!Hr(n,"DROP"))return void r(n);const o=e(),a=n.payload.reason;if("COLLECTING"===o.phase)return void t((e=>({type:"DROP_PENDING",payload:e}))({reason:a}));if("IDLE"===o.phase)return;"DROP_PENDING"===o.phase&&o.isWaiting&&ut(),"DRAGGING"!==o.phase&&"DROP_PENDING"!==o.phase&&ut();const i=o.critical,l=o.dimensions,s=l.draggables[o.critical.draggable.id],{impact:c,didDropInsideDroppable:u}=(({draggables:e,reason:t,lastImpact:r,home:n,viewport:o,onLiftImpact:a})=>{if(!r.at||"DROP"!==t)return{impact:Br({draggables:e,impact:a,destination:n,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1};return"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:$t},didDropInsideDroppable:!0}})({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),d=u?Lt(c):null,p=u?Ft(c):null,g={index:i.draggable.index,droppableId:i.droppable.id},f={draggableId:s.descriptor.id,type:s.descriptor.type,source:g,reason:a,mode:o.movementMode,destination:d,combine:p},m=(({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:o})=>{const{draggables:a,droppables:i}=r,l=Or(e),s=l?i[l]:null,c=i[t.descriptor.droppableId],u=Tr({impact:e,draggable:t,draggables:a,afterCritical:o,droppable:s||c,viewport:n});return yt(u,t.client.borderBox.center)})({impact:c,draggable:s,dimensions:l,viewport:o.viewport,afterCritical:o.afterCritical}),b={critical:o.critical,afterCritical:o.afterCritical,result:f,impact:c};if(!(!xt(o.current.client.offset,m)||Boolean(f.combine)))return void t(tn({completed:b}));const v=(({current:e,destination:t,reason:r})=>{const n=wt(e,t);if(n<=0)return fn;if(n>=1500)return mn;const o=fn+bn*(n/1500);return Number(("CANCEL"===r?.6*o:o).toFixed(2))})({current:o.current.client.offset,destination:m,reason:a});t((e=>({type:"DROP_ANIMATE",payload:e}))({newHomeClientOffset:m,dropDuration:v,completed:b}))};var hn=()=>({x:window.pageXOffset,y:window.pageYOffset});function yn({onWindowScroll:e}){const t=nt((function(){e(hn())})),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}(t);let n=it;function o(){return n!==it}return{start:function(){o()&&ut(),n=lt(window,[r])},stop:function(){o()||ut(),t.cancel(),n(),n=it},isActive:o}}const xn=e=>{const t=yn({onWindowScroll:t=>{e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return e=>r=>{!t.isActive()&&Hr(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&(e=>Hr(e,"DROP_COMPLETE")||Hr(e,"DROP_ANIMATE")||Hr(e,"FLUSH"))(r)&&t.stop(),e(r)}};var On=()=>{const e=[];return{add:t=>{const r=setTimeout((()=>(t=>{const r=e.findIndex((e=>e.timerId===t));-1===r&&ut();const[n]=e.splice(r,1);n.callback()})(r))),n={timerId:r,callback:t};e.push(n)},flush:()=>{if(!e.length)return;const t=[...e];e.length=0,t.forEach((e=>{clearTimeout(e.timerId),e.callback()}))}}};const En=(e,t)=>{Lr(),t(),Fr()},wn=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function In(e,t,r,n){if(!e)return void r(n(t));const o=(e=>{let t=!1,r=!1;const n=setTimeout((()=>{r=!0})),o=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return o.wasCalled=()=>t,o})(r);e(t,{announce:o}),o.wasCalled()||r(n(t))}var Dn=(e,t)=>{const r=((e,t)=>{const r=On();let n=null;const o=r=>{n||ut(),n=null,En(0,(()=>In(e().onDragEnd,r,t,bt.onDragEnd)))};return{beforeCapture:(t,r)=>{n&&ut(),En(0,(()=>{const n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})}))},beforeStart:(t,r)=>{n&&ut(),En(0,(()=>{const n=e().onBeforeDragStart;n&&n(wn(t,r))}))},start:(o,a)=>{n&&ut();const i=wn(o,a);n={mode:a,lastCritical:o,lastLocation:i.source,lastCombine:null},r.add((()=>{En(0,(()=>In(e().onDragStart,i,t,bt.onDragStart)))}))},update:(o,a)=>{const i=Lt(a),l=Ft(a);n||ut();const s=!((e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n})(o,n.lastCritical);s&&(n.lastCritical=o);const c=(d=i,!(null==(u=n.lastLocation)&&null==d||null!=u&&null!=d&&u.droppableId===d.droppableId&&u.index===d.index));var u,d;c&&(n.lastLocation=i);const p=!((e,t)=>null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId)(n.lastCombine,l);if(p&&(n.lastCombine=l),!s&&!c&&!p)return;const g={...wn(o,n.mode),combine:l,destination:i};r.add((()=>{En(0,(()=>In(e().onDragUpdate,g,t,bt.onDragUpdate)))}))},flush:()=>{n||ut(),r.flush()},drop:o,abort:()=>{if(!n)return;const e={...wn(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};o(e)}}})(e,t);return e=>t=>n=>{if(Hr(n,"BEFORE_INITIAL_CAPTURE"))return void r.beforeCapture(n.payload.draggableId,n.payload.movementMode);if(Hr(n,"INITIAL_PUBLISH")){const e=n.payload.critical;return r.beforeStart(e,n.payload.movementMode),t(n),void r.start(e,n.payload.movementMode)}if(Hr(n,"DROP_COMPLETE")){const e=n.payload.completed.result;return r.flush(),t(n),void r.drop(e)}if(t(n),Hr(n,"FLUSH"))return void r.abort();const o=e.getState();"DRAGGING"===o.phase&&r.update(o.critical,o.impact)}};const Sn=e=>t=>r=>{if(!Hr(r,"DROP_ANIMATION_FINISHED"))return void t(r);const n=e.getState();"DROP_ANIMATING"!==n.phase&&ut(),e.dispatch(tn({completed:n.completed}))},An=e=>{let t=null,r=null;return n=>o=>{if((Hr(o,"FLUSH")||Hr(o,"DROP_COMPLETE")||Hr(o,"DROP_ANIMATION_FINISHED"))&&(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(o),!Hr(o,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame((()=>{r=null,t=lt(window,[a])}))}};var Cn=e=>t=>r=>n=>{if((e=>Hr(e,"DROP_COMPLETE")||Hr(e,"DROP_ANIMATE")||Hr(e,"FLUSH"))(n))return e.stop(),void r(n);if(Hr(n,"INITIAL_PUBLISH")){r(n);const o=t.getState();return"DRAGGING"!==o.phase&&ut(),void e.start(o)}r(n),e.scroll(t.getState())};const Pn=e=>t=>r=>{if(t(r),!Hr(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(rn({reason:n.reason})))},jn=ke.compose;var Nn=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:o,autoScroller:a})=>{return(0,ke.createStore)(Wr,jn((0,ke.applyMiddleware)((i=r,()=>e=>t=>{Hr(t,"INITIAL_PUBLISH")&&i.dragging(),Hr(t,"DROP_ANIMATE")&&i.dropping(t.payload.completed.result.reason),(Hr(t,"FLUSH")||Hr(t,"DROP_COMPLETE"))&&i.resting(),e(t)}),(e=>()=>t=>r=>{(Hr(r,"DROP_COMPLETE")||Hr(r,"FLUSH")||Hr(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)})(e),(e=>({getState:t,dispatch:r})=>n=>o=>{if(!Hr(o,"LIFT"))return void n(o);const{id:a,clientSelection:i,movementMode:l}=o.payload,s=t();"DROP_ANIMATING"===s.phase&&r(tn({completed:s.completed})),"IDLE"!==t().phase&&ut(),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:l}});const c={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},{critical:u,dimensions:d,viewport:p}=e.startPublishing(c);r({type:"INITIAL_PUBLISH",payload:{critical:u,dimensions:d,clientSelection:i,movementMode:l,viewport:p}})})(e),vn,Sn,An,Pn,Cn(a),xn,(e=>{let t=!1;return()=>r=>n=>{if(Hr(n,"INITIAL_PUBLISH"))return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if(Hr(n,"FLUSH"))return t=!1,void e.tryRestoreFocusRecorded();if(Hr(n,"DROP_COMPLETE")){t=!1;const r=n.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}})(t),Dn(n,o))));var i};var Bn=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const o=yt({x:t,y:e},{x:n,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Tn=()=>{const e=document.documentElement;return e||ut(),e},Rn=()=>{const e=Tn();return Bn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},_n=({critical:e,scrollOptions:t,registry:r})=>{Lr();const n=(()=>{const e=hn(),t=Rn(),r=e.y,n=e.x,o=Tn(),a=o.clientWidth,i=o.clientHeight;return{frame:He({top:r,left:n,right:n+a,bottom:r+i}),scroll:{initial:e,current:e,max:t,diff:{value:vt,displacement:vt}}}})(),o=n.scroll.current,a=e.droppable,i=r.droppable.getAllByType(a.type).map((e=>e.callbacks.getDimensionAndWatchScroll(o,t))),l=r.draggable.getAllByType(e.draggable.type).map((e=>e.getDimension(o))),s={draggables:Bt(l),droppables:Nt(i)};Fr();return{dimensions:s,critical:e,viewport:n}};function Ln(e,t,r){if(r.descriptor.id===t.id)return!1;if(r.descriptor.type!==t.type)return!1;return"virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode}var Fn=(e,t)=>{let r=null;const n=function({registry:e,callbacks:t}){let r={additions:{},removals:{},modified:{}},n=null;const o=()=>{n||(t.collectionStarting(),n=requestAnimationFrame((()=>{n=null,Lr();const{additions:o,removals:a,modified:i}=r,l=Object.keys(o).map((t=>e.draggable.getById(t).getDimension(vt))).sort(((e,t)=>e.descriptor.index-t.descriptor.index)),s=Object.keys(i).map((t=>({droppableId:t,scroll:e.droppable.getById(t).callbacks.getScrollWhileDragging()}))),c={additions:l,removals:Object.keys(a),modified:s};r={additions:{},removals:{},modified:{}},Fr(),t.publish(c)})))};return{add:e=>{const t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],o()},remove:e=>{const t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],o()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=t=>{r||ut();const o=r.critical.draggable;"ADDITION"===t.type&&Ln(e,o,t.value)&&n.add(t.value),"REMOVAL"===t.type&&Ln(e,o,t.value)&&n.remove(t.value)},a={updateDroppableIsEnabled:(n,o)=>{e.droppable.exists(n)||ut(),r&&t.updateDroppableIsEnabled({id:n,isEnabled:o})},updateDroppableIsCombineEnabled:(n,o)=>{r&&(e.droppable.exists(n)||ut(),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:o}))},scrollDroppable:(t,n)=>{r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:(n,o)=>{r&&(e.droppable.exists(n)||ut(),t.updateDroppableScroll({id:n,newScroll:o}))},startPublishing:t=>{r&&ut();const n=e.draggable.getById(t.draggableId),a=e.droppable.getById(n.descriptor.droppableId),i={draggable:n.descriptor,droppable:a.descriptor},l=e.subscribe(o);return r={critical:i,unsubscribe:l},_n({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:()=>{if(!r)return;n.stop();const t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach((e=>e.callbacks.dragStopped())),r.unsubscribe(),r=null}};return a},kn=(e,t)=>"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason),Mn=e=>{window.scrollBy(e.x,e.y)};const Gn=rt((e=>Tt(e).filter((e=>!!e.isEnabled&&!!e.frame))));var $n=({center:e,destination:t,droppables:r})=>{if(t){const e=r[t];return e.frame?e:null}const n=((e,t)=>{const r=Gn(t).find((t=>(t.frame||ut(),Ir(t.frame.pageMarginBox)(e))))||null;return r})(e,r);return n};const Un={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Wn=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;if(0===n)return 0;return(r-e)/n},Hn=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:o})=>{const a=((e,t,r=()=>Un)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return 1;const o=1-Wn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=n.maxPixelScroll*n.ease(o);return Math.ceil(a)})(e,t,o);return 0===a?0:n?Math.max(((e,t,r)=>{const n=r(),o=n.durationDampening.accelerateAt,a=n.durationDampening.stopDampeningAt,i=t,l=a,s=Date.now()-i;if(s>=a)return e;if(s<o)return 1;const c=Wn({startOfRange:o,endOfRange:l,current:s}),u=e*n.ease(c);return Math.ceil(u)})(a,r,o),1):a},Vn=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=((e,t,r=()=>Un)=>{const n=r();return{startScrollingFrom:e[t.size]*n.startFromPercentage,maxScrollValueAt:e[t.size]*n.maxScrollAtPercentage}})(e,n,a);return t[n.end]<t[n.start]?Hn({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a}):-1*Hn({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})};const zn=Dt((e=>0===e?0:e));var qn=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=Vn({container:t,distanceToEdges:i,dragStartTime:e,axis:zt,shouldUseTimeDampening:o,getAutoScrollerOptions:a}),s=Vn({container:t,distanceToEdges:i,dragStartTime:e,axis:qt,shouldUseTimeDampening:o,getAutoScrollerOptions:a}),c=zn({x:s,y:l});if(xt(c,vt))return null;const u=(({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,o=t.width>e.width;return o||n?o&&n?null:{x:o?0:r.x,y:n?0:r.y}:r})({container:t,subject:r,proposedScroll:c});return u?xt(u,vt)?null:u:null};const Qn=Dt((e=>0===e?0:e>0?1:-1)),Yn=(()=>{const e=(e,t)=>e<0?e:e>t?e-t:0;return({current:t,max:r,change:n})=>{const o=ht(t,n),a={x:e(o.x,r.x),y:e(o.y,r.y)};return xt(a,vt)?null:a}})(),Xn=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=Qn(r),a=Yn({max:n,current:t,change:o});return!a||(0!==o.x&&0===a.x||0!==o.y&&0===a.y)},Kn=(e,t)=>Xn({current:e.scroll.current,max:e.scroll.max,change:t}),Jn=(e,t)=>{const r=e.frame;return!!r&&Xn({current:r.scroll.current,max:r.scroll.max,change:t})};var Zn=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:o,getAutoScrollerOptions:a})=>{const i=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const o=(({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=qn({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a});return i&&Kn(e,i)?i:null})({dragStartTime:t,viewport:e.viewport,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:a});if(o)return void n(o)}const s=$n({center:i,destination:Or(e.impact),droppables:e.dimensions.droppables});if(!s)return;const c=(({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=e.frame;if(!i)return null;const l=qn({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a});return l&&Jn(e,l)?l:null})({dragStartTime:t,droppable:s,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:a});c&&o(s.descriptor.id,c)},eo=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(e,r)=>{if(!Jn(e,r))return r;const n=((e,t)=>{const r=e.frame;return r&&Jn(e,t)?Yn({current:r.scroll.current,max:r.scroll.max,change:t}):null})(e,r);if(!n)return t(e.descriptor.id,r),null;const o=yt(r,n);t(e.descriptor.id,o);return yt(r,o)},o=(e,t,n)=>{if(!e)return n;if(!Kn(t,n))return n;const o=((e,t)=>{if(!Kn(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return Yn({current:n,max:r,change:t})})(t,n);if(!o)return r(n),null;const a=yt(n,o);r(a);return yt(n,a)};return t=>{const r=t.scrollJumpRequest;if(!r)return;const a=Or(t.impact);a||ut();const i=n(t.dimensions.droppables[a],r);if(!i)return;const l=t.viewport,s=o(t.isWindowScrollAllowed,l,i);s&&((t,r)=>{const n=ht(t.current.client.selection,r);e({client:n})})(t,s)}},to=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const o=(({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>Un})=>{const n=nt(e),o=nt(t);let a=null;const i=e=>{a||ut();const{shouldUseTimeDampening:t,dragStartTime:i}=a;Zn({state:e,scrollWindow:n,scrollDroppable:o,dragStartTime:i,shouldUseTimeDampening:t,getAutoScrollerOptions:r})};return{start:e=>{Lr(),a&&ut();const t=Date.now();let n=!1;const o=()=>{n=!0};Zn({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:o,scrollDroppable:o,getAutoScrollerOptions:r}),a={dragStartTime:t,shouldUseTimeDampening:n},Fr(),n&&i(e)},stop:()=>{a&&(n.cancel(),o.cancel(),a=null)},scroll:i}})({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),a=eo({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:e=>{n().disabled||"DRAGGING"!==e.phase||("FLUID"!==e.movementMode?e.scrollJumpRequest&&a(e):o.scroll(e))},start:o.start,stop:o.stop}};const ro="data-rfd",no=(()=>{const e=`${ro}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),oo=(()=>{const e=`${ro}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),ao=(()=>{const e=`${ro}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),io={contextId:`${ro}-scroll-container-context-id`},lo=(e,t)=>e.map((e=>{const r=e.styles[t];return r?`${e.selector} { ${r} }`:""})).join(" ");const so="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?K.useLayoutEffect:K.useEffect,co=()=>{const e=document.querySelector("head");return e||ut(),e},uo=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function po(e,t){const r=$e((()=>(e=>{const t=(r=e,e=>`[${e}="${r}"]`);var r;const n=(()=>{const e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:t(no.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}})(),o=[(()=>{const e=`\n      transition: ${un.outOfTheWay};\n    `;return{selector:t(oo.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}})(),n,{selector:t(ao.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:lo(o,"always"),resting:lo(o,"resting"),dragging:lo(o,"dragging"),dropAnimating:lo(o,"dropAnimating"),userCancel:lo(o,"userCancel")}})(e)),[e]),n=(0,K.useRef)(null),o=(0,K.useRef)(null),a=Ue(rt((e=>{const t=o.current;t||ut(),t.textContent=e})),[]),i=Ue((e=>{const t=n.current;t||ut(),t.textContent=e}),[]);so((()=>{(n.current||o.current)&&ut();const l=uo(t),s=uo(t);return n.current=l,o.current=s,l.setAttribute(`${ro}-always`,e),s.setAttribute(`${ro}-dynamic`,e),co().appendChild(l),co().appendChild(s),i(r.always),a(r.resting),()=>{const e=e=>{const t=e.current;t||ut(),co().removeChild(t),e.current=null};e(n),e(o)}}),[t,i,a,r.always,r.resting,e]);const l=Ue((()=>a(r.dragging)),[a,r.dragging]),s=Ue((e=>{a("DROP"!==e?r.userCancel:r.dropAnimating)}),[a,r.dropAnimating,r.userCancel]),c=Ue((()=>{o.current&&a(r.resting)}),[a,r.resting]);return $e((()=>({dragging:l,dropping:s,resting:c})),[l,s,c])}function go(e,t){return Array.from(e.querySelectorAll(t))}var fo=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function mo(e){return e instanceof fo(e).HTMLElement}function bo(e,t){const r=`[${no.contextId}="${e}"]`,n=go(document,r);if(!n.length)return null;const o=n.find((e=>e.getAttribute(no.draggableId)===t));return o&&mo(o)?o:null}function vo(){const e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach((t=>t(e)))}function n(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:t=>{e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:(t,r)=>{const n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:t=>{const o=t.descriptor.id,a=n(o);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[o],e.droppables[t.descriptor.droppableId]&&r({type:"REMOVAL",value:t}))},getById:function(e){const t=n(e);return t||ut(),t},findById:n,exists:e=>Boolean(n(e)),getAllByType:t=>Object.values(e.draggables).filter((e=>e.descriptor.type===t))},droppable:{register:t=>{e.droppables[t.descriptor.id]=t},unregister:t=>{const r=o(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){const t=o(e);return t||ut(),t},findById:o,exists:e=>Boolean(o(e)),getAllByType:t=>Object.values(e.droppables).filter((e=>e.descriptor.type===t))},subscribe:function(e){return t.push(e),function(){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var ho=J().createContext(null),yo=()=>{const e=document.body;return e||ut(),e};const xo={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};const Oo={separator:"::"};function Eo(e,t=Oo){const r=J().useId();return $e((()=>`${e}${t.separator}${r}`),[t.separator,e,r])}var wo=J().createContext(null);function Io(e){0}function Do(e,t){Io()}function So(){Do()}function Ao(e){const t=(0,K.useRef)(e);return(0,K.useEffect)((()=>{t.current=e})),t}function Co(e){return"IDLE"!==e.phase&&"DROP_ANIMATING"!==e.phase&&e.isDragging}const Po=9,jo=13,No=33,Bo=34,To=35,Ro=36,_o={[jo]:!0,[Po]:!0};var Lo=e=>{_o[e.keyCode]&&e.preventDefault()};const Fo=(()=>{const e="visibilitychange";if("undefined"==typeof document)return e;return[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find((e=>`on${e}`in document))||e})();const ko={type:"IDLE"};function Mo({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:e=>{const{button:t,clientX:o,clientY:a}=e;if(0!==t)return;const i={x:o,y:a},l=r();if("DRAGGING"===l.type)return e.preventDefault(),void l.actions.move(i);"PENDING"!==l.type&&ut();const s=l.point;if(c=s,u=i,!(Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5))return;var c,u;e.preventDefault();const d=l.actions.fluidLift(i);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:n=>{const o=r();"DRAGGING"===o.type?(n.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"mousedown",fn:t=>{"DRAGGING"===r().type&&t.preventDefault(),e()}},{eventName:"keydown",fn:t=>{if("PENDING"!==r().type)return 27===t.keyCode?(t.preventDefault(),void e()):void Lo(t);e()}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{"PENDING"===r().type&&e()}},{eventName:"webkitmouseforcedown",fn:t=>{const n=r();"IDLE"===n.type&&ut(),n.actions.shouldRespectForcePress()?e():t.preventDefault()}},{eventName:Fo,fn:e}]}function Go(){}const $o={[Bo]:!0,[No]:!0,[Ro]:!0,[To]:!0};function Uo(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:n=>27===n.keyCode?(n.preventDefault(),void r()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void($o[n.keyCode]?n.preventDefault():Lo(n))},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Fo,fn:r}]}const Wo={type:"IDLE"};const Ho=["input","button","textarea","select","option","optgroup","video","audio"];function Vo(e,t){if(null==t)return!1;if(Ho.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&Vo(e,t.parentElement)}function zo(e,t){const r=t.target;return!!mo(r)&&Vo(e,r)}var qo=e=>He(e.getBoundingClientRect()).center;const Qo=(()=>{const e="matches";if("undefined"==typeof document)return e;return[e,"msMatchesSelector","webkitMatchesSelector"].find((e=>e in Element.prototype))||e})();function Yo(e,t){return null==e?null:e[Qo](t)?e:Yo(e.parentElement,t)}function Xo(e,t){return e.closest?e.closest(t):Yo(e,t)}function Ko(e,t){const r=t.target;if(!((n=r)instanceof fo(n).Element))return null;var n;const o=function(e){return`[${no.contextId}="${e}"]`}(e),a=Xo(r,o);return a&&mo(a)?a:null}function Jo(e){e.preventDefault()}function Zo({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!!r()&&e===t}function ea({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const o=r.draggable.findById(n);return!!o&&(!!o.options.isEnabled&&!!kn(t.getState(),n))}function ta({lockAPI:e,contextId:t,store:r,registry:n,draggableId:o,forceSensorStop:a,sourceEvent:i}){if(!ea({lockAPI:e,store:r,registry:n,draggableId:o}))return null;const l=n.draggable.getById(o),s=function(e,t){const r=`[${oo.contextId}="${e}"]`,n=go(document,r).find((e=>e.getAttribute(oo.id)===t));return n&&mo(n)?n:null}(t,l.descriptor.id);if(!s)return null;if(i&&!l.options.canDragInteractiveElements&&zo(s,i))return null;const c=e.claim(a||it);let u="PRE_DRAG";function d(){return l.options.shouldRespectForcePress}function p(){return e.isActive(c)}const g=function(e,t){Zo({expected:e,phase:u,isLockActive:p,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function f(t){function n(){e.release(),u="COMPLETED"}function o(e,o={shouldBlockNextClick:!1}){if(t.cleanup(),o.shouldBlockNextClick){const e=lt(window,[{eventName:"click",fn:Jo,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(e)}n(),r.dispatch(rn({reason:e}))}return"PRE_DRAG"!==u&&(n(),ut()),r.dispatch((e=>({type:"LIFT",payload:e}))(t.liftActionArgs)),u="DRAGGING",{isActive:()=>Zo({expected:"DRAGGING",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:d,drop:e=>o("DROP",e),cancel:e=>o("CANCEL",e),...t.actions}}return{isActive:()=>Zo({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:function(e){const t=nt((e=>{g((()=>Xr({client:e})))}));return{...f({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:()=>t.cancel(),actions:{move:t}}),move:t}},snapLift:function(){const e={moveUp:()=>g(Kr),moveRight:()=>g(Zr),moveDown:()=>g(Jr),moveLeft:()=>g(en)};return f({liftActionArgs:{id:o,clientSelection:qo(s),movementMode:"SNAP"},cleanup:it,actions:e})},abort:function(){Zo({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!0})&&e.release()}}}const ra=[function(e){const t=(0,K.useRef)(ko),r=(0,K.useRef)(it),n=$e((()=>({eventName:"mousedown",fn:function(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)return;const n=e.findClosestDraggableId(t);if(!n)return;const o=e.tryGetLock(n,i,{sourceEvent:t});if(!o)return;t.preventDefault();const a={x:t.clientX,y:t.clientY};r.current(),c(o,a)}})),[e]),o=$e((()=>({eventName:"webkitmouseforcewillbegin",fn:t=>{if(t.defaultPrevented)return;const r=e.findClosestDraggableId(t);if(!r)return;const n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}})),[e]),a=Ue((function(){r.current=lt(window,[o,n],{passive:!1,capture:!0})}),[o,n]),i=Ue((()=>{"IDLE"!==t.current.type&&(t.current=ko,r.current(),a())}),[a]),l=Ue((()=>{const e=t.current;i(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[i]),s=Ue((function(){const e=Mo({cancel:l,completed:i,getPhase:()=>t.current,setPhase:e=>{t.current=e}});r.current=lt(window,e,{capture:!0,passive:!1})}),[l,i]),c=Ue((function(e,r){"IDLE"!==t.current.type&&ut(),t.current={type:"PENDING",point:r,actions:e},s()}),[s]);so((function(){return a(),function(){r.current()}}),[a])},function(e){const t=(0,K.useRef)(Go),r=$e((()=>({eventName:"keydown",fn:function(r){if(r.defaultPrevented)return;if(32!==r.keyCode)return;const o=e.findClosestDraggableId(r);if(!o)return;const a=e.tryGetLock(o,s,{sourceEvent:r});if(!a)return;r.preventDefault();let i=!0;const l=a.snapLift();function s(){i||ut(),i=!1,t.current(),n()}t.current(),t.current=lt(window,Uo(l,s),{capture:!0,passive:!1})}})),[e]),n=Ue((function(){t.current=lt(window,[r],{passive:!1,capture:!0})}),[r]);so((function(){return n(),function(){t.current()}}),[n])},function(e){const t=(0,K.useRef)(Wo),r=(0,K.useRef)(it),n=Ue((function(){return t.current}),[]),o=Ue((function(e){t.current=e}),[]),a=$e((()=>({eventName:"touchstart",fn:function(t){if(t.defaultPrevented)return;const n=e.findClosestDraggableId(t);if(!n)return;const o=e.tryGetLock(n,l,{sourceEvent:t});if(!o)return;const a=t.touches[0],{clientX:i,clientY:s}=a,c={x:i,y:s};r.current(),d(o,c)}})),[e]),i=Ue((function(){r.current=lt(window,[a],{capture:!0,passive:!1})}),[a]),l=Ue((()=>{const e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o(Wo),r.current(),i())}),[i,o]),s=Ue((()=>{const e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),c=Ue((function(){const e={capture:!0,passive:!1},t={cancel:s,completed:l,getPhase:n},o=lt(window,function({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:t=>{const n=r();if("DRAGGING"!==n.type)return void e();n.hasMoved=!0;const{clientX:o,clientY:a}=t.touches[0],i={x:o,y:a};t.preventDefault(),n.actions.move(i)}},{eventName:"touchend",fn:n=>{const o=r();"DRAGGING"===o.type?(n.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"touchcancel",fn:t=>{"DRAGGING"===r().type?(t.preventDefault(),e()):e()}},{eventName:"touchforcechange",fn:t=>{const n=r();"IDLE"===n.type&&ut();const o=t.touches[0];if(!o)return;if(!(o.force>=.15))return;const a=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return a?n.hasMoved?void t.preventDefault():void e():void t.preventDefault();a&&e()}},{eventName:Fo,fn:e}]}(t),e),a=lt(window,function({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:e=>{e.preventDefault()}},{eventName:"keydown",fn:r=>{"DRAGGING"===t().type?(27===r.keyCode&&r.preventDefault(),e()):e()}},{eventName:Fo,fn:e}]}(t),e);r.current=function(){o(),a()}}),[s,n,l]),u=Ue((function(){const e=n();"PENDING"!==e.type&&ut();const t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[n,o]),d=Ue((function(e,t){"IDLE"!==n().type&&ut();const r=setTimeout(u,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:r}),c()}),[c,n,o,u]);so((function(){return i(),function(){r.current();const e=n();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o(Wo))}}),[n,i,o]),so((function(){return lt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])}),[])}];function na({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:o}){const a=[...o?ra:[],...n||[]],i=(0,K.useState)((()=>function(){let e=null;function t(){e||ut(),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&ut();const r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()))[0],l=Ue((function(e,t){Co(e)&&!Co(t)&&i.tryAbandon()}),[i]);so((function(){let e=t.getState();return t.subscribe((()=>{const r=t.getState();l(e,r),e=r}))}),[i,t,l]),so((()=>i.tryAbandon),[i.tryAbandon]);const s=Ue((e=>ea({lockAPI:i,registry:r,store:t,draggableId:e})),[i,r,t]),c=Ue(((n,o,a)=>ta({lockAPI:i,registry:r,contextId:e,store:t,draggableId:n,forceSensorStop:o||null,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null})),[e,i,r,t]),u=Ue((t=>function(e,t){const r=Ko(e,t);return r?r.getAttribute(no.draggableId):null}(e,t)),[e]),d=Ue((e=>{const t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),p=Ue((function(){i.isClaimed()&&(i.tryAbandon(),"IDLE"!==t.getState().phase&&t.dispatch({type:"FLUSH",payload:null}))}),[i,t]),g=Ue((()=>i.isClaimed()),[i]),f=$e((()=>({canGetLock:s,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:p,isLockClaimed:g})),[s,c,u,d,p,g]);Io();for(let e=0;e<a.length;e++)a[e](f)}function oa(e){return e.current||ut(),e.current}function aa(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:o,dragHandleUsageInstructions:a}=e,i=(0,K.useRef)(null);So();const l=Ao(e),s=Ue((()=>(e=>({onBeforeCapture:t=>{(0,Le.flushSync)((()=>{e.onBeforeCapture&&e.onBeforeCapture(t)}))},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}))(l.current)),[l]),c=Ue((()=>(e=>({...Un,...e.autoScrollerOptions,durationDampening:{...Un.durationDampening,...e.autoScrollerOptions}}))(l.current)),[l]),u=function(e){const t=$e((()=>(e=>`rfd-announcement-${e}`)(e)),[e]),r=(0,K.useRef)(null);return(0,K.useEffect)((function(){const e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),ot(e.style,xo),yo().appendChild(e),function(){setTimeout((function(){const t=yo();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[t]),Ue((e=>{const t=r.current;t&&(t.textContent=e)}),[])}(t),d=function({contextId:e,text:t}){const r=Eo("hidden-text",{separator:"-"}),n=$e((()=>function({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}({contextId:e,uniqueId:r})),[r,e]);return(0,K.useEffect)((function(){const e=document.createElement("div");return e.id=n,e.textContent=t,e.style.display="none",yo().appendChild(e),function(){const t=yo();t.contains(e)&&t.removeChild(e)}}),[n,t]),n}({contextId:t,text:a}),p=po(t,o),g=Ue((e=>{oa(i).dispatch(e)}),[]),f=$e((()=>(0,ke.bindActionCreators)({publishWhileDragging:Vr,updateDroppableScroll:qr,updateDroppableIsEnabled:Qr,updateDroppableIsCombineEnabled:Yr,collectionStarting:zr},g)),[g]),m=function(){const e=$e(vo,[]);return(0,K.useEffect)((()=>function(){e.clean()}),[e]),e}(),b=$e((()=>Fn(m,f)),[m,f]),v=$e((()=>to({scrollWindow:Mn,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:c,...(0,ke.bindActionCreators)({move:Xr},g)})),[b.scrollDroppable,g,c]),h=function(e){const t=(0,K.useRef)({}),r=(0,K.useRef)(null),n=(0,K.useRef)(null),o=(0,K.useRef)(!1),a=Ue((function(e,r){const n={id:e,focus:r};return t.current[e]=n,function(){const r=t.current;r[e]!==n&&delete r[e]}}),[]),i=Ue((function(t){const r=bo(e,t);r&&r!==document.activeElement&&r.focus()}),[e]),l=Ue((function(e,t){r.current===e&&(r.current=t)}),[]),s=Ue((function(){n.current||o.current&&(n.current=requestAnimationFrame((()=>{n.current=null;const e=r.current;e&&i(e)})))}),[i]),c=Ue((function(e){r.current=null;const t=document.activeElement;t&&t.getAttribute(no.draggableId)===e&&(r.current=e)}),[]);return so((()=>(o.current=!0,function(){o.current=!1;const e=n.current;e&&cancelAnimationFrame(e)})),[]),$e((()=>({register:a,tryRecordFocus:c,tryRestoreFocusRecorded:s,tryShiftRecord:l})),[a,c,s,l])}(t),y=$e((()=>Nn({announce:u,autoScroller:v,dimensionMarshal:b,focusMarshal:h,getResponders:s,styleMarshal:p})),[u,v,b,h,s,p]);i.current=y;const x=Ue((()=>{const e=oa(i);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),O=Ue((()=>{const e=oa(i).getState();return"DROP_ANIMATING"===e.phase||"IDLE"!==e.phase&&e.isDragging}),[]);r($e((()=>({isDragging:O,tryAbort:x})),[O,x]));const E=Ue((e=>kn(oa(i).getState(),e)),[]),w=Ue((()=>wr(oa(i).getState())),[]),I=$e((()=>({marshal:b,focus:h,contextId:t,canLift:E,isMovementAllowed:w,dragHandleUsageInstructionsId:d,registry:m})),[t,b,d,h,E,w,m]);return na({contextId:t,store:y,registry:m,customSensors:n||null,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,K.useEffect)((()=>x),[x]),J().createElement(wo.Provider,{value:I},J().createElement(Me.Provider,{context:ho,store:y},e.children))}function ia(e){const t=J().useId(),r=e.dragHandleUsageInstructions||bt.dragHandleUsageInstructions;return J().createElement(dt,null,(n=>J().createElement(aa,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children)))}const la=5e3,sa=4500,ca=(e,t)=>t?un.drop(t.duration):e?un.snap:un.fluid,ua=(e,t)=>{if(e)return t?an.drop:an.combining};function da(e){return"DRAGGING"===e.type?function(e){const t=e.dimension.client,{offset:r,combineWith:n,dropping:o}=e,a=Boolean(n),i=(e=>null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode)(e),l=Boolean(o),s=l?gn(r,a):pn(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:ca(i,o),transform:s,opacity:ua(a,l),zIndex:l?sa:la,pointerEvents:"none"}}(e):{transform:pn((t=e).offset),transition:t.shouldAnimateDisplacement?void 0:"none"};var t}function pa(e){const t=Eo("draggable"),{descriptor:r,registry:n,getDraggableRef:o,canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l}=e,s=$e((()=>({canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l})),[a,l,i]),c=Ue((e=>{const t=o();return t||ut(),function(e,t,r=vt){const n=window.getComputedStyle(t),o=t.getBoundingClientRect(),a=Je(o,n),i=Ke(a,r);return{descriptor:e,placeholder:{client:a,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:a.marginBox.width,y:a.marginBox.height},client:a,page:i}}(r,t,e)}),[r,o]),u=$e((()=>({uniqueId:t,descriptor:r,options:s,getDimension:c})),[r,c,s,t]),d=(0,K.useRef)(u),p=(0,K.useRef)(!0);so((()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current))),[n.draggable]),so((()=>{if(p.current)return void(p.current=!1);const e=d.current;d.current=u,n.draggable.update(u,e)}),[u,n.draggable])}var ga=J().createContext(null);function fa(e){const t=(0,K.useContext)(e);return t||ut(),t}function ma(e){e.preventDefault()}var ba=(e,t)=>e===t,va=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};function ha(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const ya={mapped:{type:"SECONDARY",offset:vt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ha(null)}};const xa={dropAnimationFinished:nn},Oa=(0,Me.connect)((()=>{const e=function(){const e=rt(((e,t)=>({x:e,y:t}))),t=rt(((e,t,r=null,n=null,o=null)=>({isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}))),r=rt(((e,r,n,o,a=null,i=null,l=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:i,mode:r,offset:e,dimension:n,forceShouldAnimate:l,snapshot:t(r,o,a,i,null)}})));return(n,o)=>{if(Co(n)){if(n.critical.draggable.id!==o.draggableId)return null;const t=n.current.client.offset,i=n.dimensions.draggables[o.draggableId],l=Or(n.impact),s=(a=n.impact).at&&"COMBINE"===a.at.type?a.at.combine.draggableId:null,c=n.forceShouldAnimate;return r(e(t.x,t.y),n.movementMode,i,o.isClone,l,s,c)}var a;if("DROP_ANIMATING"===n.phase){const e=n.completed;if(e.result.draggableId!==o.draggableId)return null;const r=o.isClone,a=n.dimensions.draggables[o.draggableId],i=e.result,l=i.mode,s=va(i),c=(e=>e.combine?e.combine.draggableId:null)(i),u={duration:n.dropDuration,curve:on,moveTo:n.newHomeClientOffset,opacity:c?an.drop:null,scale:c?ln.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:a,dropping:u,draggingOver:s,combineWith:c,mode:l,forceShouldAnimate:null,snapshot:t(l,r,s,c,u)}}}return null}}(),t=function(){const e=rt(((e,t)=>({x:e,y:t}))),t=rt(ha),r=rt(((e,r=null,n)=>({mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:n,snapshot:t(r)}}))),n=e=>e?r(vt,e,!0):null,o=(t,o,a,i)=>{const l=a.displaced.visible[t],s=Boolean(i.inVirtualList&&i.effected[t]),c=Ft(a),u=c&&c.draggableId===t?o:null;if(!l){if(!s)return n(u);if(a.displaced.invisible[t])return null;const o=Ot(i.displacedBy.point),l=e(o.x,o.y);return r(l,u,!0)}if(s)return n(u);const d=a.displacedBy.point,p=e(d.x,d.y);return r(p,u,l.shouldAnimate)};return(e,t)=>{if(Co(e))return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){const r=e.completed;return r.result.draggableId===t.draggableId?null:o(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return(r,n)=>e(r,n)||t(r,n)||ya}),xa,null,{context:ho,areStatePropsEqual:ba})((e=>{const t=(0,K.useRef)(null),r=Ue(((e=null)=>{t.current=e}),[]),n=Ue((()=>t.current),[]),{contextId:o,dragHandleUsageInstructionsId:a,registry:i}=fa(wo),{type:l,droppableId:s}=fa(ga),c=$e((()=>({id:e.draggableId,index:e.index,type:l,droppableId:s})),[e.draggableId,e.index,l,s]),{children:u,draggableId:d,isEnabled:p,shouldRespectForcePress:g,canDragInteractiveElements:f,isClone:m,mapped:b,dropAnimationFinished:v}=e;if(Do(),Io(),!m){pa($e((()=>({descriptor:c,registry:i,getDraggableRef:n,canDragInteractiveElements:f,shouldRespectForcePress:g,isEnabled:p})),[c,i,n,f,g,p]))}const h=$e((()=>p?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:ma}:null),[o,a,d,p]),y=Ue((e=>{"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&(0,Le.flushSync)(v)}),[v,b]),x=$e((()=>{const e=da(b),t="DRAGGING"===b.type&&b.dropping?y:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":d,style:e,onTransitionEnd:t},dragHandleProps:h}}),[o,h,d,b,y,r]),O=$e((()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}})),[c.droppableId,c.id,c.index,c.type]);return J().createElement(J().Fragment,null,u(x,b.snapshot,O))}));function Ea(e){return fa(ga).isUsingCloneFor!==e.draggableId||e.isClone?J().createElement(Oa,e):null}function wa(e){const t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return J().createElement(Ea,ot({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const Ia=e=>t=>e===t,Da=Ia("scroll"),Sa=Ia("auto"),Aa=(Ia("visible"),(e,t)=>t(e.overflowX)||t(e.overflowY)),Ca=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Aa(r,Da)||Aa(r,Sa)},Pa=e=>null==e||e===document.body||e===document.documentElement?null:Ca(e)?e:Pa(e.parentElement);var ja=e=>({x:e.scrollLeft,y:e.scrollTop});const Na=e=>{if(!e)return!1;return"fixed"===window.getComputedStyle(e).position||Na(e.parentElement)};var Ba=({ref:e,descriptor:t,env:r,windowScroll:n,direction:o,isDropDisabled:a,isCombineEnabled:i,shouldClipSubject:l})=>{const s=r.closestScrollable,c=((e,t)=>{const r=Ze(e);if(!t)return r;if(e!==t)return r;const n=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,a=n+t.scrollHeight,i=o+t.scrollWidth,l=Ve({top:n,right:i,bottom:a,left:o},r.border);return Qe({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})})(e,s),u=Ke(c,n),d=(()=>{if(!s)return null;const e=Ze(s),t={scrollHeight:s.scrollHeight,scrollWidth:s.scrollWidth};return{client:e,page:Ke(e,n),scroll:ja(s),scrollSize:t,shouldClipSubject:l}})(),p=(({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:o,client:a,page:i,closest:l})=>{const s=(()=>{if(!l)return null;const{scrollSize:e,client:t}=l,r=Bn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:r,diff:{value:vt,displacement:vt}}}})(),c="vertical"===o?zt:qt;return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:c,isEnabled:t,client:a,page:i,frame:s,subject:Pt({page:i,withPlaceholder:null,axis:c,frame:s})}})({descriptor:t,isEnabled:!a,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:o,client:c,page:u,closest:d});return p};const Ta={passive:!1},Ra={passive:!0};var _a=e=>e.shouldPublishImmediately?Ta:Ra;const La=e=>e&&e.env.closestScrollable||null;function Fa(e){const t=(0,K.useRef)(null),r=fa(wo),n=Eo("droppable"),{registry:o,marshal:a}=r,i=Ao(e),l=$e((()=>({id:e.droppableId,type:e.type,mode:e.mode})),[e.droppableId,e.mode,e.type]),s=(0,K.useRef)(l),c=$e((()=>rt(((e,r)=>{t.current||ut();const n={x:e,y:r};a.updateDroppableScroll(l.id,n)}))),[l.id,a]),u=Ue((()=>{const e=t.current;return e&&e.env.closestScrollable?ja(e.env.closestScrollable):vt}),[]),d=Ue((()=>{const e=u();c(e.x,e.y)}),[u,c]),p=$e((()=>nt(d)),[d]),g=Ue((()=>{const e=t.current,r=La(e);e&&r||ut();e.scrollOptions.shouldPublishImmediately?d():p()}),[p,d]),f=Ue(((e,n)=>{t.current&&ut();const o=i.current,a=o.getDroppableRef();a||ut();const s=(e=>({closestScrollable:Pa(e),isFixedOnPage:Na(e)}))(a),c={ref:a,descriptor:l,env:s,scrollOptions:n};t.current=c;const u=Ba({ref:a,descriptor:l,env:s,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),d=s.closestScrollable;return d&&(d.setAttribute(io.contextId,r.contextId),d.addEventListener("scroll",g,_a(c.scrollOptions))),u}),[r.contextId,l,g,i]),m=Ue((()=>{const e=t.current,r=La(e);return e&&r||ut(),ja(r)}),[]),b=Ue((()=>{const e=t.current;e||ut();const r=La(e);t.current=null,r&&(p.cancel(),r.removeAttribute(io.contextId),r.removeEventListener("scroll",g,_a(e.scrollOptions)))}),[g,p]),v=Ue((e=>{const r=t.current;r||ut();const n=La(r);n||ut(),n.scrollTop+=e.y,n.scrollLeft+=e.x}),[]),h=$e((()=>({getDimensionAndWatchScroll:f,getScrollWhileDragging:m,dragStopped:b,scroll:v})),[b,f,m,v]),y=$e((()=>({uniqueId:n,descriptor:l,callbacks:h})),[h,l,n]);so((()=>(s.current=y.descriptor,o.droppable.register(y),()=>{t.current&&b(),o.droppable.unregister(y)})),[h,l,b,y,a,o.droppable]),so((()=>{t.current&&a.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)}),[e.isDropDisabled,a]),so((()=>{t.current&&a.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,a])}function ka(){}const Ma={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Ga=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=(({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||"close"===r?Ma:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin})({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?un.placeholder:null}};var $a=J().memo((e=>{const t=(0,K.useRef)(null),r=Ue((()=>{t.current&&(clearTimeout(t.current),t.current=null)}),[]),{animate:n,onTransitionEnd:o,onClose:a,contextId:i}=e,[l,s]=(0,K.useState)("open"===e.animate);(0,K.useEffect)((()=>l?"open"!==n?(r(),s(!1),ka):t.current?ka:(t.current=setTimeout((()=>{t.current=null,s(!1)})),r):ka),[n,l,r]);const c=Ue((e=>{"height"===e.propertyName&&(o(),"close"===n&&a())}),[n,a,o]),u=Ga({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return J().createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":i,onTransitionEnd:c,ref:e.innerRef})}));class Ua extends J().PureComponent{constructor(...e){super(...e),this.state={isVisible:Boolean(this.props.on),data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{"close"===this.state.animate&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const Wa={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||ut(),document.body}},Ha=e=>{let t,r={...e};for(t in Wa)void 0===e[t]&&(r={...r,[t]:Wa[t]});return r},Va=(e,t)=>e===t.droppable.type,za=(e,t)=>t.draggables[e.draggable.id],qa={updateViewportMaxScroll:e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e})},Qa=(0,Me.connect)((()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=rt((e=>({draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}))),n=rt(((n,o,a,i,l,s)=>{const c=l.descriptor.id;if(l.descriptor.droppableId===n){const e=s?{render:s,dragging:r(l.descriptor)}:null,t={isDraggingOver:a,draggingOverWith:a?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:t,useClone:e}}if(!o)return t;if(!i)return e;const u={isDraggingOver:a,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:u,useClone:null}}));return(r,o)=>{const a=Ha(o),i=a.droppableId,l=a.type,s=!a.isDropDisabled,c=a.renderClone;if(Co(r)){const e=r.critical;if(!Va(l,e))return t;const o=za(e,r.dimensions),a=Or(r.impact)===i;return n(i,s,a,a,o,c)}if("DROP_ANIMATING"===r.phase){const e=r.completed;if(!Va(l,e.critical))return t;const o=za(e.critical,r.dimensions);return n(i,s,va(e.result)===i,Or(e.impact)===i,o,c)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){const n=r.completed;if(!Va(l,n.critical))return t;const o=Or(n.impact)===i,a=Boolean(n.impact.at&&"COMBINE"===n.impact.at.type),s=n.critical.droppable.id===i;return o?a?e:t:s?e:t}return t}}),qa,((e,t,r)=>({...Ha(r),...e,...t})),{context:ho,areStatePropsEqual:ba})((e=>{const t=(0,K.useContext)(wo);t||ut();const{contextId:r,isMovementAllowed:n}=t,o=(0,K.useRef)(null),a=(0,K.useRef)(null),{children:i,droppableId:l,type:s,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:p,isCombineEnabled:g,snapshot:f,useClone:m,updateViewportMaxScroll:b,getContainerForClone:v}=e,h=Ue((()=>o.current),[]),y=Ue(((e=null)=>{o.current=e}),[]),x=(Ue((()=>a.current),[]),Ue(((e=null)=>{a.current=e}),[]));Do();const O=Ue((()=>{n()&&b({maxScroll:Rn()})}),[n,b]);Fa({droppableId:l,type:s,mode:c,direction:u,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:d,getDroppableRef:h});const E=$e((()=>J().createElement(Ua,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(({onClose:e,data:t,animate:n})=>J().createElement($a,{placeholder:t,onClose:e,innerRef:x,animate:n,contextId:r,onTransitionEnd:O})))),[r,O,e.placeholder,e.shouldAnimatePlaceholder,x]),w=$e((()=>({innerRef:y,placeholder:E,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}})),[r,l,E,y]),I=m?m.dragging.draggableId:null,D=$e((()=>({droppableId:l,type:s,isUsingCloneFor:I})),[l,I,s]);return J().createElement(ga.Provider,{value:D},i(w,f),function(){if(!m)return null;const{dragging:e,render:t}=m,r=J().createElement(Ea,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},((r,n)=>t(r,n,e)));return Fe().createPortal(r,v())}())}));var Ya=Qa;function Xa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xa(e,t,r[t])}))}return e}function Ja(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Za="clear-fns",ei="add-alias",ti="remove-alias",ri="remove-fn",ni=[{label:"Clear All Functions",value:Za},{label:"Add Alias",value:ei},{label:"Remove Alias",value:ti},"divider",...A],oi=[{label:"Remove Function",value:ri},"divider",...A];function ai(e){return{spaceAround:(0,ne.css)({padding:`0 ${e.spacing(.5)}`}),activeText:(0,ne.css)({display:"inline-block",cursor:"pointer","&:hover":{color:e.colors.text.maxContrast},"&:active":{color:e.colors.text.maxContrast}}),dragHandler:(0,ne.css)({color:e.colors.text.disabled})}}function ii({value:e,onChange:t,options:r}){const n=(0,Z.useStyles2)(oe),o=(0,Z.useTheme2)(),[a,i]=(0,K.useState)(!0);function l(r){t([...e,{name:r,id:(0,j.uniqueId)(B)}])}function s(r){const n=[...e];n.splice(e.indexOf(r),1),t(n)}const c=e.map(((n,o)=>J().createElement(wa,{key:n.id,draggableId:n.id,index:o},((a,i)=>J().createElement("div",Ka({ref:a.innerRef},a.draggableProps),J().createElement(li,{column:n,onRemove:s,onChange:r=>function(r,n){const o=[...e];o.splice(n,1,r),t(o)}(r,o),options:r,dragHandlerProps:a.dragHandleProps}))))));return J().createElement(Z.InlineFieldRow,null,J().createElement(Z.InlineField,{label:"SELECT",labelWidth:12,className:n.inlineField2,grow:!0},J().createElement(ia,{onDragEnd:function(r,n){if(!r.destination)return;const o=[...e],[a]=o.splice(r.source.index,1);o.splice(r.destination.index,0,a),t(o)}},J().createElement(Ya,{droppableId:"droppable",direction:a?"horizontal":"vertical"},((e,t)=>J().createElement(Z.Stack,{gap:.5,wrap:"wrap",grow:1,direction:a?"row":"column",alignItems:"flex-start",ref:e.innerRef},c," ",e.placeholder,J().createElement(Z.Stack,{direction:"row",grow:1,gap:0},J().createElement(Z.InlineLabel,{as:"div",width:"auto",style:{gap:o.spacing(1)}},J().createElement(le,{options:r,onSelect:l,selected:""},J().createElement(Z.IconButton,{tooltip:"Add Criteria",name:"plus",size:"lg",variant:"secondary"})),J().createElement(si,{inline:a,onChange:i})),J().createElement(Z.InlineLabel,{as:"div",className:ae,style:{flexGrow:1},width:"auto"},J().createElement(Z.Tooltip,{content:y.select,placement:"top-end"},J().createElement(Z.Icon,{name:"question-circle"}))))))))))}function li({column:e,onRemove:t,onChange:r,options:n,dragHandlerProps:o}){const a=(0,Z.useTheme2)(),i=(0,Z.useStyles2)(ai);const l=e.appliedFunctions||[],s=l.map((({name:t},n)=>J().createElement(me,{key:`${n}_${t}`,selected:"name",options:oi,onSelect:t=>function(t,n){const o=Ja(Ka({},e),{appliedFunctions:[...e.appliedFunctions]});t===ri?o.appliedFunctions.splice(n,1):o.appliedFunctions[n]={name:t};r(o)}(t.value,n)},J().createElement("span",{className:(0,ne.cx)(i.activeText,i.spaceAround)},t," (")))),c=J().createElement(J().Fragment,null,l.length>0&&J().createElement("div",{className:i.spaceAround},l.map((()=>")")).join(" ")));return J().createElement(Z.InlineLabel,{as:"div",className:(0,ne.cx)(ae),style:{paddingLeft:a.spacing(1)},width:"auto"},J().createElement(me,{selected:"",options:ni.filter((t=>"string"==typeof t||t.value!==(e.alias?ei:ti))),onSelect:function(t){const n=Ka({},e);switch(t.value){case ei:n.alias=(0,j.uniqueId)(T);break;case ti:delete n.alias;break;case Za:n.appliedFunctions=[];break;default:var o;n.appliedFunctions=n.appliedFunctions||[],null===(o=n.appliedFunctions)||void 0===o||o.push({name:t.value})}r(n)}},J().createElement(Z.IconButton,{style:{marginRight:a.spacing(1)},name:"ellipsis-h",size:"lg",variant:"secondary",tooltip:"Column Functions"})),J().createElement("div",{style:{display:"inline-flex",marginRight:a.spacing(1)}},s,J().createElement(le,{selected:"",options:n,onSelect:function(t){r(Ja(Ka({},e),{name:t}))}},J().createElement("span",{className:i.activeText},e.name)),c,e.alias&&J().createElement(J().Fragment,null,J().createElement("span",{className:i.spaceAround,style:{color:a.colors.primary.text}},"AS"),J().createElement(Z.Input,{width:12,value:e.alias,onChangeCapture:function(t){r(Ja(Ka({},e),{alias:t.target.value}))}}))),J().createElement(Z.IconButton,{name:"trash-alt",onClick:()=>t(e),size:"lg",variant:"secondary",tooltip:"Remove column"}),J().createElement("div",Ja(Ka({},o),{className:(0,ne.cx)(i.activeText,i.dragHandler)}),J().createElement(Z.Icon,{name:"draggabledots",className:ae,size:"lg"})))}function si({inline:e,onChange:t}){return J().createElement(Z.IconButton,{onClick:()=>t(!e),className:ae,tooltip:e?"Switch to align columns one per line":"Switch to align columns by default",name:"columns",size:"lg",variant:"secondary",style:{transform:e?"rotate(90deg)":"none"}})}const ci=({rawMode:e,onChange:t})=>{const[r,n]=(0,K.useState)(!1);return(0,K.useEffect)((()=>{n(!1)}),[e]),e?J().createElement(J().Fragment,null,J().createElement(Z.Button,{"aria-label":"Switch to visual editor",icon:"pen",variant:"secondary",type:"button",onClick:()=>n(!0)}),J().createElement(Z.ConfirmModal,{isOpen:r,title:"Switch to visual editor mode",body:"Are your sure to switch to visual editor? Your changes will be lost.",confirmText:"Confirm",dismissText:"Cancel",onConfirm:()=>t(!1),onDismiss:()=>n(!1)})):J().createElement(Z.Button,{"aria-label":"Switch to text editor",icon:"pen",variant:"secondary",type:"button",onClick:()=>t(!0)})};function ui({alias:e,onChange:t,onRunQuery:r}){const n=(0,Z.useStyles2)(oe);return J().createElement(Z.SegmentSection,{label:"ALIAS BY",fill:!1},J().createElement(Z.InlineField,{grow:!0},J().createElement(Z.Input,{value:e,placeholder:x,onInput:e=>t(e.target.value),onKeyUp:e=>"Enter"===e.key&&r()})),J().createElement(Z.InlineField,{className:n.inlineField},J().createElement(Z.InlineLabel,{className:ae},J().createElement(Z.Tooltip,{content:y.alias,placement:"top-end"},J().createElement(Z.Icon,{name:"question-circle"})))))}function di({value:e,onChange:t}){return J().createElement(Z.SegmentSection,{label:"FORMAT AS",fill:!0},J().createElement(Z.InlineField,null,J().createElement(Z.Select,{options:[{label:"Time Series",value:"time_series"},{label:"Table",value:"table"}],value:e,onChange:e=>t(e.value)})))}function pi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){pi(e,t,r[t])}))}return e}function fi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function mi({datasource:e,query:t,onChange:r,onRunQuery:n}){const o=(0,K.useId)(),a=t._nsgTarget||G({limit:100}),i=(0,Z.useStyles2)(oe),{variables:l}=function(e){const[t,r]=(0,K.useState)(null),[n,o]=(0,K.useState)(!1),[a,i]=(0,K.useState)(null);return(0,K.useEffect)((()=>{o(!0),e.getNSGVariables().then((e=>i(e))).catch((e=>r(e))).finally((()=>o(!1)))}),[e]),{variables:a,loading:n,error:t}}(e),{tagsFacets:s}=_e(a.variable,e),c=(0,K.useMemo)((()=>(a.columns.find((({id:e})=>!e))&&a.columns.forEach((e=>e.id=(0,j.uniqueId)(B))),a.columns)),[a.columns]),u=(0,K.useMemo)((()=>{const e=l||{};return[{label:"Tables",value:"tables",items:[{label:"Devices",value:"devices"},{label:"Alerts",value:"alerts"}]},"divider",...Object.keys(e).map(((t,r)=>({label:t,value:t.toLowerCase()+"_"+r,items:e[t].map((e=>({label:e.name,value:e.name})))})))]}),[l]),d=(0,K.useMemo)((()=>{const e=l||{},t=Object.keys(e).map(((t,r)=>({label:t,value:t.toLowerCase()+"_"+r,items:e[t].map((e=>({label:e.name,value:e.name})))})));return[{label:"Tags",value:"tags",items:s.map((e=>({label:e,value:e})))},{label:"Predefined columns",value:"predefined_columns",items:S},{label:"Variables",value:"variables",items:t}]}),[l,s]),p=(0,K.useMemo)((()=>[{label:"device",value:"device"},{label:"component",value:"component"},...s.map((e=>({label:e,value:e})))]),[s]),g=(0,K.useMemo)((()=>"table"===a.format?c.filter((e=>e.name!==h.column)).map((({name:e,alias:t=""})=>({label:t||e,value:t||e}))):d.filter((({value:e})=>"variables"!==e))),[d,c,a.format]),f=(0,K.useMemo)((()=>d.filter((({value:e})=>"variables"!==e))),[d]);function m(e,o=!1){r(fi(gi({},t),{_nsgTarget:gi({},a,e)})),o&&n()}const b=e=>m({limit:e.value},!0);return(0,K.useEffect)((()=>{let e=k(a);e&&m(e)}),[]),null===l?J().createElement(Z.LoadingPlaceholder,{text:"Loading...."}):J().createElement("div",{id:o},J().createElement(ue,{onChange:e=>{m(fi(gi({},k(a)||{}),{variable:e}),!0)},value:a.variable,options:u},J().createElement(ci,{rawMode:Boolean(a.rawQuery),onChange:function(){m({rawQuery:a.rawQuery?0:1,nsgqlString:e.getSQLString(a)})}})),a.variable!==h.variable&&J().createElement(J().Fragment,null,J().createElement(ii,{value:c,onChange:e=>m({columns:e},!0),options:d}),J().createElement(je,{variable:a.variable,datasource:e,value:a.tags,onChange:e=>m({tags:e},!0),options:p}),J().createElement(xe,{value:a.orderBy,onChange:e=>m({orderBy:e},!0),options:g}),J().createElement(fe,{value:a.groupBy,onChange:e=>m({groupBy:e},!0),options:f}),J().createElement(Z.SegmentSection,{label:"LIMIT",fill:!1},J().createElement(Z.InlineField,null,J().createElement(Z.Select,{key:a.limit,value:a.limit,allowCustomValue:!0,isSearchable:!1,placeholder:"Optional",width:13,options:[{label:"None",value:null},{label:"1",value:1},{label:"5",value:5},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}],onChange:b})),a.limit&&J().createElement("div",{className:"gf-form-label"},J().createElement(Z.IconButton,{className:ae,tooltip:"Clear Limit",name:"times",size:"lg",variant:"secondary",onClick:()=>b({value:null})})),J().createElement(Z.InlineField,{className:i.inlineField,grow:!0},J().createElement(Z.InlineLabel,{className:ae},J().createElement(Z.Tooltip,{content:y.limit,placement:"top-start"},J().createElement(Z.Icon,{name:"question-circle"}))))),J().createElement(di,{value:a.format,onChange:e=>m({format:e},!0)}),J().createElement(ui,{alias:a.alias,onChange:e=>m({alias:e}),onRunQuery:n}),J().createElement(Z.InlineFieldRow,null,J().createElement(Z.InlineField,{label:"DISABLE ADHOC FILTER",className:i.inlineField},J().createElement(Z.InlineSwitch,{value:a.disableAdHoc,onChange:e=>m({disableAdHoc:e.target.checked},!0)})),J().createElement(Z.InlineField,{grow:!0,className:i.inlineField},J().createElement(Z.InlineLabel,null,J().createElement(J().Fragment,null))),J().createElement(Z.InlineField,{className:i.inlineField},J().createElement(Z.InlineLabel,null,"Plugin Version: ",e.meta.info.version)))))}function bi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){bi(e,t,r[t])}))}return e}function hi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function yi({query:e,onChange:t,onRunQuery:r,datasource:n}){const o=e._nsgTarget||G({limit:100}),[a,i]=(0,K.useState)(o.nsgqlString);return J().createElement("div",null,J().createElement(Z.InlineFieldRow,null,J().createElement(Z.InlineField,{grow:!0},J().createElement(Z.TextArea,{value:a,onChange:function(e){i(e.target.value)},onBlur:function(){o.nsgqlString!==a&&t(hi(vi({},e),{_nsgTarget:hi(vi({},o),{nsgqlString:a})}))}})),J().createElement(ci,{rawMode:!0,onChange:function(){t(hi(vi({},e),{_nsgTarget:hi(vi({},o),{rawQuery:0,nsgqlString:a})}))}})),J().createElement(di,{value:o.format,onChange:function(r){o.format!==r&&t(hi(vi({},e),{_nsgTarget:hi(vi({},o),{format:r})}))}}),J().createElement(ui,{alias:o.alias,onChange:function(r){o.alias!==r&&t(hi(vi({},e),{_nsgTarget:hi(vi({},o),{alias:r})}))},onRunQuery:r}))}const xi=new r.DataSourcePlugin(X).setConfigEditor((function({onOptionsChange:e,options:t}){const{jsonData:r,secureJsonData:n,secureJsonFields:o,readOnly:a}=t;function i(n,o={},a={}){e(re(te({},t),{jsonData:te({},r,n),secureJsonData:te({},t.secureJsonData,o),secureJsonFields:te({},t.secureJsonFields,a)}))}return J().createElement("div",null,J().createElement(Z.DataSourceHttpSettings,{defaultUrl:"",showAccessOptions:!0,dataSourceConfig:t,onChange:e}),J().createElement(Z.InlineField,{label:"Network Id",labelWidth:14,interactive:!0,tooltip:"Json field returned to frontend"},J().createElement(Z.Input,{id:"config-editor-network-id",onChange:e=>i({networkId:+e.target.value}),value:r.networkId,placeholder:"Enter networkId",autoComplete:"off",readOnly:a,type:"number",width:10})),J().createElement(Z.InlineField,{label:"Auth Token",labelWidth:14,interactive:!0},J().createElement(Z.InlineSwitch,{value:t.jsonData.useToken,onChange:e=>i({useToken:e.target.checked,accessToken:""},{apiKey:""},{apiKey:!1}),readOnly:a})),t.jsonData.useToken&&"proxy"===t.access&&J().createElement(Z.InlineField,{label:"API Key",labelWidth:20,interactive:!0,tooltip:"Secure (backend only store)"},J().createElement(Z.SecretInput,{isConfigured:o.apiKey,value:null==n?void 0:n.apiKey,placeholder:"Enter your API key",autoComplete:"off",width:34,onReset:()=>i({},{apiKey:""},{apiKey:!1}),onChange:e=>i({accessToken:""},{apiKey:e.target.value}),readOnly:a})),t.jsonData.useToken&&"direct"===t.access&&J().createElement(J().Fragment,null,J().createElement(Z.InlineField,{label:"API Key (Unsafe)",labelWidth:20,interactive:!0,tooltip:"Unsafe (the token is visible in browser's console requests)"},J().createElement(Z.Input,{required:!0,autoComplete:"off",value:r.accessToken,placeholder:"Enter your API key",readOnly:a,width:34,onChange:e=>i({accessToken:e.target.value},{apiKey:""},{apiKey:!1})})),J().createElement(Z.InlineField,{label:"Send Auth Token with HTTP header"},J().createElement(Z.InlineSwitch,{value:t.jsonData.addTokenToHeader,onChange:e=>i({addTokenToHeader:e.target.checked}),readOnly:a}))))})).setQueryEditor((function(e){const t=(0,K.useId)(),r=!!(e.query._nsgTarget||G({limit:100})).rawQuery,n=!r;return J().createElement("div",{id:t},n&&J().createElement(mi,e),r&&J().createElement(yi,e))}))})(),f})()));
//# sourceMappingURL=module.js.map